<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-type" content="text/html;charset=UTF-8">
        <title>README</title>
        <style>:root
{
    --markdown-font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", system-ui, "Ubuntu", "Droid Sans", sans-serif;
    --markdown-font-size: 14px;
    --markdown-line-height: 1.6;
    --vscode-font-family:"Segoe WPC", "Segoe UI", sans-serif;
    --vscode-font-weight:normal;
    --vscode-font-size:13px;
    --vscode-editor-font-family:Consolas, "Courier New", monospace;
    --vscode-editor-font-weight:normal;
    --vscode-editor-font-size:14px;
    --vscode-foreground:#616161;
    --vscode-errorForeground:#a1260d;
    --vscode-descriptionForeground:#717171;
    --vscode-icon-foreground:#424242;
    --vscode-focusBorder:#0090f1;
    --vscode-textSeparator-foreground:rgba(0, 0, 0, 0.18);
    --vscode-textLink-foreground:#006ab1;
    --vscode-textLink-activeForeground:#006ab1;
    --vscode-textPreformat-foreground:#a31515;
    --vscode-textBlockQuote-background:rgba(127, 127, 127, 0.1);
    --vscode-textBlockQuote-border:rgba(0, 122, 204, 0.5);
    --vscode-textCodeBlock-background:rgba(220, 220, 220, 0.4);
    --vscode-widget-shadow:#a8a8a8;
    --vscode-input-background:#ffffff;
    --vscode-input-foreground:#616161;
    --vscode-inputOption-activeBorder:rgba(0, 122, 204, 0);
    --vscode-inputOption-activeBackground:rgba(0, 144, 241, 0.2);
    --vscode-inputOption-activeForeground:#000000;
    --vscode-input-placeholderForeground:#767676;
    --vscode-inputValidation-infoBackground:#d6ecf2;
    --vscode-inputValidation-infoBorder:#007acc;
    --vscode-inputValidation-warningBackground:#f6f5d2;
    --vscode-inputValidation-warningBorder:#b89500;
    --vscode-inputValidation-errorBackground:#f2dede;
    --vscode-inputValidation-errorBorder:#be1100;
    --vscode-dropdown-background:#ffffff;
    --vscode-dropdown-border:#cecece;
    --vscode-checkbox-background:#ffffff;
    --vscode-checkbox-border:#cecece;
    --vscode-button-foreground:#ffffff;
    --vscode-button-background:#007acc;
    --vscode-button-hoverBackground:#0062a3;
    --vscode-button-secondaryForeground:#ffffff;
    --vscode-button-secondaryBackground:#5f6a79;
    --vscode-button-secondaryHoverBackground:#4c5561;
    --vscode-badge-background:#c4c4c4;
    --vscode-badge-foreground:#333333;
    --vscode-scrollbar-shadow:#dddddd;
    --vscode-scrollbarSlider-background:rgba(100, 100, 100, 0.4);
    --vscode-scrollbarSlider-hoverBackground:rgba(100, 100, 100, 0.7);
    --vscode-scrollbarSlider-activeBackground:rgba(0, 0, 0, 0.6);
    --vscode-progressBar-background:#0e70c0;
    --vscode-editorError-foreground:#e51400;
    --vscode-editorWarning-foreground:#e9a700;
    --vscode-editorInfo-foreground:#75beff;
    --vscode-editorHint-foreground:#6c6c6c;
    --vscode-editor-background:#ffffff;
    --vscode-editor-foreground:#000000;
    --vscode-editorWidget-background:#f3f3f3;
    --vscode-editorWidget-foreground:#616161;
    --vscode-editorWidget-border:#c8c8c8;
    --vscode-quickInput-background:#f3f3f3;
    --vscode-quickInput-foreground:#616161;
    --vscode-quickInputTitle-background:rgba(0, 0, 0, 0.06);
    --vscode-pickerGroup-foreground:#0066bf;
    --vscode-pickerGroup-border:#cccedb;
    --vscode-editor-selectionBackground:#add6ff;
    --vscode-editor-inactiveSelectionBackground:#e5ebf1;
    --vscode-editor-selectionHighlightBackground:rgba(173, 214, 255, 0.5);
    --vscode-editor-findMatchBackground:#a8ac94;
    --vscode-editor-findMatchHighlightBackground:rgba(234, 92, 0, 0.33);
    --vscode-editor-findRangeHighlightBackground:rgba(180, 180, 180, 0.3);
    --vscode-searchEditor-findMatchBackground:rgba(234, 92, 0, 0.22);
    --vscode-editor-hoverHighlightBackground:rgba(173, 214, 255, 0.15);
    --vscode-editorHoverWidget-background:#f3f3f3;
    --vscode-editorHoverWidget-foreground:#616161;
    --vscode-editorHoverWidget-border:#c8c8c8;
    --vscode-editorHoverWidget-statusBarBackground:#e7e7e7;
    --vscode-editorLink-activeForeground:#0000ff;
    --vscode-editorLightBulb-foreground:#ddb100;
    --vscode-editorLightBulbAutoFix-foreground:#007acc;
    --vscode-diffEditor-insertedTextBackground:rgba(155, 185, 85, 0.2);
    --vscode-diffEditor-removedTextBackground:rgba(255, 0, 0, 0.2);
    --vscode-diffEditor-diagonalFill:rgba(34, 34, 34, 0.2);
    --vscode-list-focusBackground:#d6ebff;
    --vscode-list-activeSelectionBackground:#0074e8;
    --vscode-list-activeSelectionForeground:#ffffff;
    --vscode-list-inactiveSelectionBackground:#e4e6f1;
    --vscode-list-hoverBackground:#e8e8e8;
    --vscode-list-dropBackground:#d6ebff;
    --vscode-list-highlightForeground:#0066bf;
    --vscode-list-invalidItemForeground:#b89500;
    --vscode-list-errorForeground:#b01011;
    --vscode-list-warningForeground:#855f00;
    --vscode-listFilterWidget-background:#efc1ad;
    --vscode-listFilterWidget-outline:rgba(0, 0, 0, 0);
    --vscode-listFilterWidget-noMatchesOutline:#be1100;
    --vscode-list-filterMatchBackground:rgba(234, 92, 0, 0.33);
    --vscode-tree-indentGuidesStroke:#a9a9a9;
    --vscode-list-deemphasizedForeground:#8e8e90;
    --vscode-menu-foreground:#616161;
    --vscode-menu-background:#ffffff;
    --vscode-menu-selectionForeground:#ffffff;
    --vscode-menu-selectionBackground:#0074e8;
    --vscode-menu-separatorBackground:#888888;
    --vscode-editor-snippetTabstopHighlightBackground:rgba(10, 50, 100, 0.2);
    --vscode-editor-snippetFinalTabstopHighlightBorder:rgba(10, 50, 100, 0.5);
    --vscode-breadcrumb-foreground:rgba(97, 97, 97, 0.8);
    --vscode-breadcrumb-background:#ffffff;
    --vscode-breadcrumb-focusForeground:#4e4e4e;
    --vscode-breadcrumb-activeSelectionForeground:#4e4e4e;
    --vscode-breadcrumbPicker-background:#f3f3f3;
    --vscode-merge-currentHeaderBackground:rgba(64, 200, 174, 0.5);
    --vscode-merge-currentContentBackground:rgba(64, 200, 174, 0.2);
    --vscode-merge-incomingHeaderBackground:rgba(64, 166, 255, 0.5);
    --vscode-merge-incomingContentBackground:rgba(64, 166, 255, 0.2);
    --vscode-merge-commonHeaderBackground:rgba(96, 96, 96, 0.4);
    --vscode-merge-commonContentBackground:rgba(96, 96, 96, 0.16);
    --vscode-editorOverviewRuler-currentContentForeground:rgba(64, 200, 174, 0.5);
    --vscode-editorOverviewRuler-incomingContentForeground:rgba(64, 166, 255, 0.5);
    --vscode-editorOverviewRuler-commonContentForeground:rgba(96, 96, 96, 0.4);
    --vscode-editorOverviewRuler-findMatchForeground:rgba(209, 134, 22, 0.49);
    --vscode-editorOverviewRuler-selectionHighlightForeground:rgba(160, 160, 160, 0.8);
    --vscode-minimap-findMatchHighlight:#d18616;
    --vscode-minimap-selectionHighlight:#add6ff;
    --vscode-minimap-errorHighlight:rgba(255, 18, 18, 0.7);
    --vscode-minimap-warningHighlight:#e9a700;
    --vscode-minimapSlider-background:rgba(100, 100, 100, 0.2);
    --vscode-minimapSlider-hoverBackground:rgba(100, 100, 100, 0.35);
    --vscode-minimapSlider-activeBackground:rgba(0, 0, 0, 0.3);
    --vscode-problemsErrorIcon-foreground:#e51400;
    --vscode-problemsWarningIcon-foreground:#e9a700;
    --vscode-problemsInfoIcon-foreground:#75beff;
    --vscode-editor-lineHighlightBorder:#eeeeee;
    --vscode-editor-rangeHighlightBackground:rgba(253, 255, 0, 0.2);
    --vscode-editor-symbolHighlightBackground:rgba(234, 92, 0, 0.33);
    --vscode-editorCursor-foreground:#000000;
    --vscode-editorWhitespace-foreground:rgba(51, 51, 51, 0.2);
    --vscode-editorIndentGuide-background:#d3d3d3;
    --vscode-editorIndentGuide-activeBackground:#939393;
    --vscode-editorLineNumber-foreground:#237893;
    --vscode-editorActiveLineNumber-foreground:#0b216f;
    --vscode-editorLineNumber-activeForeground:#0b216f;
    --vscode-editorRuler-foreground:#d3d3d3;
    --vscode-editorCodeLens-foreground:#999999;
    --vscode-editorBracketMatch-background:rgba(0, 100, 0, 0.1);
    --vscode-editorBracketMatch-border:#b9b9b9;
    --vscode-editorOverviewRuler-border:rgba(127, 127, 127, 0.3);
    --vscode-editorGutter-background:#ffffff;
    --vscode-editorUnnecessaryCode-opacity:rgba(0, 0, 0, 0.47);
    --vscode-editorOverviewRuler-rangeHighlightForeground:rgba(0, 122, 204, 0.6);
    --vscode-editorOverviewRuler-errorForeground:rgba(255, 18, 18, 0.7);
    --vscode-editorOverviewRuler-warningForeground:#e9a700;
    --vscode-editorOverviewRuler-infoForeground:#75beff;
    --vscode-editorOverviewRuler-bracketMatchForeground:#a0a0a0;
    --vscode-symbolIcon-arrayForeground:#616161;
    --vscode-symbolIcon-booleanForeground:#616161;
    --vscode-symbolIcon-classForeground:#d67e00;
    --vscode-symbolIcon-colorForeground:#616161;
    --vscode-symbolIcon-constantForeground:#616161;
    --vscode-symbolIcon-constructorForeground:#652d90;
    --vscode-symbolIcon-enumeratorForeground:#d67e00;
    --vscode-symbolIcon-enumeratorMemberForeground:#007acc;
    --vscode-symbolIcon-eventForeground:#d67e00;
    --vscode-symbolIcon-fieldForeground:#007acc;
    --vscode-symbolIcon-fileForeground:#616161;
    --vscode-symbolIcon-folderForeground:#616161;
    --vscode-symbolIcon-functionForeground:#652d90;
    --vscode-symbolIcon-interfaceForeground:#007acc;
    --vscode-symbolIcon-keyForeground:#616161;
    --vscode-symbolIcon-keywordForeground:#616161;
    --vscode-symbolIcon-methodForeground:#652d90;
    --vscode-symbolIcon-moduleForeground:#616161;
    --vscode-symbolIcon-namespaceForeground:#616161;
    --vscode-symbolIcon-nullForeground:#616161;
    --vscode-symbolIcon-numberForeground:#616161;
    --vscode-symbolIcon-objectForeground:#616161;
    --vscode-symbolIcon-operatorForeground:#616161;
    --vscode-symbolIcon-packageForeground:#616161;
    --vscode-symbolIcon-propertyForeground:#616161;
    --vscode-symbolIcon-referenceForeground:#616161;
    --vscode-symbolIcon-snippetForeground:#616161;
    --vscode-symbolIcon-stringForeground:#616161;
    --vscode-symbolIcon-structForeground:#616161;
    --vscode-symbolIcon-textForeground:#616161;
    --vscode-symbolIcon-typeParameterForeground:#616161;
    --vscode-symbolIcon-unitForeground:#616161;
    --vscode-symbolIcon-variableForeground:#007acc;
    --vscode-editor-foldBackground:rgba(173, 214, 255, 0.3);
    --vscode-editorGutter-foldingControlForeground:#424242;
    --vscode-editor-onTypeRenameBackground:rgba(255, 0, 0, 0.3);
    --vscode-editorSuggestWidget-background:#f3f3f3;
    --vscode-editorSuggestWidget-border:#c8c8c8;
    --vscode-editorSuggestWidget-foreground:#000000;
    --vscode-editorSuggestWidget-selectedBackground:#d6ebff;
    --vscode-editorSuggestWidget-highlightForeground:#0066bf;
    --vscode-editor-wordHighlightBackground:rgba(87, 87, 87, 0.25);
    --vscode-editor-wordHighlightStrongBackground:rgba(14, 99, 156, 0.25);
    --vscode-editorOverviewRuler-wordHighlightForeground:rgba(160, 160, 160, 0.8);
    --vscode-editorOverviewRuler-wordHighlightStrongForeground:rgba(192, 160, 192, 0.8);
    --vscode-peekViewTitle-background:#ffffff;
    --vscode-peekViewTitleLabel-foreground:#333333;
    --vscode-peekViewTitleDescription-foreground:rgba(97, 97, 97, 0.9);
    --vscode-peekView-border:#007acc;
    --vscode-peekViewResult-background:#f3f3f3;
    --vscode-peekViewResult-lineForeground:#646465;
    --vscode-peekViewResult-fileForeground:#1e1e1e;
    --vscode-peekViewResult-selectionBackground:rgba(51, 153, 255, 0.2);
    --vscode-peekViewResult-selectionForeground:#6c6c6c;
    --vscode-peekViewEditor-background:#f2f8fc;
    --vscode-peekViewEditorGutter-background:#f2f8fc;
    --vscode-peekViewResult-matchHighlightBackground:rgba(234, 92, 0, 0.3);
    --vscode-peekViewEditor-matchHighlightBackground:rgba(245, 216, 2, 0.87);
    --vscode-editorMarkerNavigationError-background:#e51400;
    --vscode-editorMarkerNavigationWarning-background:#e9a700;
    --vscode-editorMarkerNavigationInfo-background:#75beff;
    --vscode-editorMarkerNavigation-background:#ffffff;
    --vscode-tab-activeBackground:#ffffff;
    --vscode-tab-unfocusedActiveBackground:#ffffff;
    --vscode-tab-inactiveBackground:#ececec;
    --vscode-tab-unfocusedInactiveBackground:#ececec;
    --vscode-tab-activeForeground:#333333;
    --vscode-tab-inactiveForeground:rgba(51, 51, 51, 0.7);
    --vscode-tab-unfocusedActiveForeground:rgba(51, 51, 51, 0.7);
    --vscode-tab-unfocusedInactiveForeground:rgba(51, 51, 51, 0.35);
    --vscode-tab-activeModifiedBorder:#33aaee;
    --vscode-tab-inactiveModifiedBorder:rgba(51, 170, 238, 0.5);
    --vscode-tab-unfocusedActiveModifiedBorder:rgba(51, 170, 238, 0.7);
    --vscode-tab-unfocusedInactiveModifiedBorder:rgba(51, 170, 238, 0.25);
    --vscode-tab-border:#f3f3f3;
    --vscode-editorPane-background:#ffffff;
    --vscode-editorGroupHeader-tabsBackground:#f3f3f3;
    --vscode-editorGroupHeader-noTabsBackground:#ffffff;
    --vscode-editorGroup-border:#e7e7e7;
    --vscode-editorGroup-dropBackground:rgba(38, 119, 203, 0.18);
    --vscode-imagePreview-border:rgba(128, 128, 128, 0.35);
    --vscode-panel-background:#ffffff;
    --vscode-panel-border:rgba(128, 128, 128, 0.35);
    --vscode-panelTitle-activeForeground:#424242;
    --vscode-panelTitle-inactiveForeground:rgba(66, 66, 66, 0.75);
    --vscode-panelTitle-activeBorder:#424242;
    --vscode-panelInput-border:#dddddd;
    --vscode-panel-dropBorder:#424242;
    --vscode-panelSection-dropBackground:rgba(38, 119, 203, 0.18);
    --vscode-panelSectionHeader-background:rgba(128, 128, 128, 0.2);
    --vscode-panelSection-border:rgba(128, 128, 128, 0.35);
    --vscode-statusBar-foreground:#ffffff;
    --vscode-statusBar-noFolderForeground:#ffffff;
    --vscode-statusBar-background:#007acc;
    --vscode-statusBar-noFolderBackground:#68217a;
    --vscode-statusBarItem-activeBackground:rgba(255, 255, 255, 0.18);
    --vscode-statusBarItem-hoverBackground:rgba(255, 255, 255, 0.12);
    --vscode-statusBarItem-prominentForeground:#ffffff;
    --vscode-statusBarItem-prominentBackground:rgba(0, 0, 0, 0.5);
    --vscode-statusBarItem-prominentHoverBackground:rgba(0, 0, 0, 0.3);
    --vscode-activityBar-background:#2c2c2c;
    --vscode-activityBar-foreground:#ffffff;
    --vscode-activityBar-inactiveForeground:rgba(255, 255, 255, 0.4);
    --vscode-activityBar-activeBorder:#ffffff;
    --vscode-activityBar-dropBorder:#ffffff;
    --vscode-activityBarBadge-background:#007acc;
    --vscode-activityBarBadge-foreground:#ffffff;
    --vscode-statusBarItem-remoteBackground:#16825d;
    --vscode-statusBarItem-remoteForeground:#ffffff;
    --vscode-extensionBadge-remoteBackground:#007acc;
    --vscode-extensionBadge-remoteForeground:#ffffff;
    --vscode-sideBar-background:#f3f3f3;
    --vscode-sideBarTitle-foreground:#6f6f6f;
    --vscode-sideBar-dropBackground:rgba(38, 119, 203, 0.18);
    --vscode-sideBarSectionHeader-background:rgba(0, 0, 0, 0);
    --vscode-sideBarSectionHeader-border:rgba(97, 97, 97, 0.19);
    --vscode-titleBar-activeForeground:#333333;
    --vscode-titleBar-inactiveForeground:rgba(51, 51, 51, 0.6);
    --vscode-titleBar-activeBackground:#dddddd;
    --vscode-titleBar-inactiveBackground:rgba(221, 221, 221, 0.6);
    --vscode-menubar-selectionForeground:#333333;
    --vscode-menubar-selectionBackground:rgba(0, 0, 0, 0.1);
    --vscode-notifications-foreground:#616161;
    --vscode-notifications-background:#f3f3f3;
    --vscode-notificationLink-foreground:#006ab1;
    --vscode-notificationCenterHeader-background:#e7e7e7;
    --vscode-notifications-border:#e7e7e7;
    --vscode-notificationsErrorIcon-foreground:#e51400;
    --vscode-notificationsWarningIcon-foreground:#e9a700;
    --vscode-notificationsInfoIcon-foreground:#75beff;
    --vscode-editorGutter-commentRangeForeground:#c5c5c5;
    --vscode-editor-stackFrameHighlightBackground:rgba(255, 255, 102, 0.45);
    --vscode-editor-focusedStackFrameHighlightBackground:rgba(206, 231, 206, 0.45);
    --vscode-terminal-foreground:#333333;
    --vscode-terminal-selectionBackground:rgba(0, 0, 0, 0.25);
    --vscode-terminal-border:rgba(128, 128, 128, 0.35);
    --vscode-statusBar-debuggingBackground:#cc6633;
    --vscode-statusBar-debuggingForeground:#ffffff;
    --vscode-settings-headerForeground:#444444;
    --vscode-settings-modifiedItemIndicator:#66afe0;
    --vscode-settings-dropdownBackground:#ffffff;
    --vscode-settings-dropdownBorder:#cecece;
    --vscode-settings-dropdownListBorder:#c8c8c8;
    --vscode-settings-checkboxBackground:#ffffff;
    --vscode-settings-checkboxBorder:#cecece;
    --vscode-settings-textInputBackground:#ffffff;
    --vscode-settings-textInputForeground:#616161;
    --vscode-settings-textInputBorder:#cecece;
    --vscode-settings-numberInputBackground:#ffffff;
    --vscode-settings-numberInputForeground:#616161;
    --vscode-settings-numberInputBorder:#cecece;
    --vscode-debugExceptionWidget-border:#a31515;
    --vscode-debugExceptionWidget-background:#f1dfde;
    --vscode-editorGutter-modifiedBackground:#66afe0;
    --vscode-editorGutter-addedBackground:#81b88b;
    --vscode-editorGutter-deletedBackground:#ca4b51;
    --vscode-minimapGutter-modifiedBackground:#66afe0;
    --vscode-minimapGutter-addedBackground:#81b88b;
    --vscode-minimapGutter-deletedBackground:#ca4b51;
    --vscode-editorOverviewRuler-modifiedForeground:rgba(102, 175, 224, 0.6);
    --vscode-editorOverviewRuler-addedForeground:rgba(129, 184, 139, 0.6);
    --vscode-editorOverviewRuler-deletedForeground:rgba(202, 75, 81, 0.6);
    --vscode-searchEditor-textInputBorder:#cecece;
    --vscode-debugIcon-breakpointForeground:#e51400;
    --vscode-debugIcon-breakpointDisabledForeground:#848484;
    --vscode-debugIcon-breakpointUnverifiedForeground:#848484;
    --vscode-debugIcon-breakpointCurrentStackframeForeground:#ffcc00;
    --vscode-debugIcon-breakpointStackframeForeground:#89d185;
    --vscode-debugToolBar-background:#f3f3f3;
    --vscode-debugIcon-startForeground:#388a34;
    --vscode-debugIcon-pauseForeground:#007acc;
    --vscode-debugIcon-stopForeground:#a1260d;
    --vscode-debugIcon-disconnectForeground:#a1260d;
    --vscode-debugIcon-restartForeground:#388a34;
    --vscode-debugIcon-stepOverForeground:#007acc;
    --vscode-debugIcon-stepIntoForeground:#007acc;
    --vscode-debugIcon-stepOutForeground:#007acc;
    --vscode-debugIcon-continueForeground:#007acc;
    --vscode-debugIcon-stepBackForeground:#007acc;
    --vscode-debugTokenExpression-name:#9b46b0;
    --vscode-debugTokenExpression-value:rgba(108, 108, 108, 0.8);
    --vscode-debugTokenExpression-string:#a31515;
    --vscode-debugTokenExpression-boolean:#0000ff;
    --vscode-debugTokenExpression-number:#098658;
    --vscode-debugTokenExpression-error:#e51400;
    --vscode-debugView-exceptionLabelForeground:#ffffff;
    --vscode-debugView-exceptionLabelBackground:#a31515;
    --vscode-debugView-stateLabelForeground:#616161;
    --vscode-debugView-stateLabelBackground:rgba(136, 136, 136, 0.27);
    --vscode-debugView-valueChangedHighlight:#569cd6;
    --vscode-debugConsole-infoForeground:#75beff;
    --vscode-debugConsole-warningForeground:#e9a700;
    --vscode-debugConsole-errorForeground:#a1260d;
    --vscode-debugConsole-sourceForeground:#616161;
    --vscode-debugConsoleInputIcon-foreground:#616161;
    --vscode-extensionButton-prominentBackground:#327e36;
    --vscode-extensionButton-prominentForeground:#ffffff;
    --vscode-extensionButton-prominentHoverBackground:#28632b;
    --vscode-notebook-cellBorderColor:#dae3e9;
    --vscode-notebook-focusedEditorBorder:#0090f1;
    --vscode-notebookStatusSuccessIcon-foreground:#388a34;
    --vscode-notebookStatusErrorIcon-foreground:#a1260d;
    --vscode-notebookStatusRunningIcon-foreground:#616161;
    --vscode-notebook-outputContainerBackgroundColor:rgba(200, 221, 241, 0.31);
    --vscode-notebook-cellToolbarSeparator:rgba(128, 128, 128, 0.35);
    --vscode-notebook-focusedCellBackground:rgba(200, 221, 241, 0.31);
    --vscode-notebook-cellHoverBackground:rgba(200, 221, 241, 0.22);
    --vscode-notebook-focusedCellBorder:rgba(0, 0, 0, 0.12);
    --vscode-notebook-cellStatusBarItemHoverBackground:rgba(0, 0, 0, 0.08);
    --vscode-notebook-cellInsertionIndicator:#0090f1;
    --vscode-notebookScrollbarSlider-background:rgba(100, 100, 100, 0.4);
    --vscode-notebookScrollbarSlider-hoverBackground:rgba(100, 100, 100, 0.7);
    --vscode-notebookScrollbarSlider-activeBackground:rgba(0, 0, 0, 0.6);
    --vscode-notebook-symbolHighlightBackground:rgba(253, 255, 0, 0.2);
    --vscode-scm-providerBorder:#c8c8c8;
    --vscode-terminal-ansiBlack:#000000;
    --vscode-terminal-ansiRed:#cd3131;
    --vscode-terminal-ansiGreen:#00bc00;
    --vscode-terminal-ansiYellow:#949800;
    --vscode-terminal-ansiBlue:#0451a5;
    --vscode-terminal-ansiMagenta:#bc05bc;
    --vscode-terminal-ansiCyan:#0598bc;
    --vscode-terminal-ansiWhite:#555555;
    --vscode-terminal-ansiBrightBlack:#666666;
    --vscode-terminal-ansiBrightRed:#cd3131;
    --vscode-terminal-ansiBrightGreen:#14ce14;
    --vscode-terminal-ansiBrightYellow:#b5ba00;
    --vscode-terminal-ansiBrightBlue:#0451a5;
    --vscode-terminal-ansiBrightMagenta:#bc05bc;
    --vscode-terminal-ansiBrightCyan:#0598bc;
    --vscode-terminal-ansiBrightWhite:#a5a5a5;
    --vscode-gitDecoration-addedResourceForeground:#587c0c;
    --vscode-gitDecoration-modifiedResourceForeground:#895503;
    --vscode-gitDecoration-deletedResourceForeground:#ad0707;
    --vscode-gitDecoration-untrackedResourceForeground:#007100;
    --vscode-gitDecoration-ignoredResourceForeground:#8e8e90;
    --vscode-gitDecoration-conflictingResourceForeground:#6c6cc4;
    --vscode-gitDecoration-submoduleResourceForeground:#1258a7;
    --vscode-gitlens-gutterBackgroundColor:rgba(0, 0, 0, 0.05);
    --vscode-gitlens-gutterForegroundColor:#747474;
    --vscode-gitlens-gutterUncommittedForegroundColor:rgba(0, 188, 242, 0.6);
    --vscode-gitlens-trailingLineBackgroundColor:rgba(0, 0, 0, 0);
    --vscode-gitlens-trailingLineForegroundColor:rgba(153, 153, 153, 0.35);
    --vscode-gitlens-lineHighlightBackgroundColor:rgba(0, 188, 242, 0.2);
    --vscode-gitlens-lineHighlightOverviewRulerColor:rgba(0, 188, 242, 0.6);
    --vscode-issues-newIssueDecoration:rgba(0, 0, 0, 0.28);
}

body
{
    background-color: var(--vscode-editor-background);
    color: var(--vscode-editor-foreground);
    font-family: var(--vscode-font-family);
    font-weight: var(--vscode-font-weight);
    font-size: var(--vscode-font-size);
    margin: 0;
    padding: 0 20px;
}

img
{
    max-width: 100%;
    max-height: 100%;
}

a
{
    color: var(--vscode-textLink-foreground);
}

a:hover
{
    color: var(--vscode-textLink-activeForeground);
}

a:focus,
input:focus,
select:focus,
textarea:focus
{
    outline: 1px solid -webkit-focus-ring-color;
    outline-offset: -1px;
}

code
{
    color: var(--vscode-textPreformat-foreground);
}

blockquote
{
    background: var(--vscode-textBlockQuote-background);
    border-color: var(--vscode-textBlockQuote-border);
}

kbd
{
    color: var(--vscode-editor-foreground);
    border-radius: 3px;
    vertical-align: middle;
    padding: 1px 3px;

    background-color: hsla(0,0%,50%,.17);
    border: 1px solid rgba(71,71,71,.4);
    border-bottom-color: rgba(88,88,88,.4);
    box-shadow: inset 0 -1px 0 rgba(88,88,88,.4);
}

.vscode-light kbd
{
    background-color: hsla(0,0%,87%,.5);
    border: 1px solid hsla(0,0%,80%,.7);
    border-bottom-color: hsla(0,0%,73%,.7);
    box-shadow: inset 0 -1px 0 hsla(0,0%,73%,.7);
}

::-webkit-scrollbar
{
    width: 10px;
    height: 10px;
}

::-webkit-scrollbar-corner
{
    background-color: var(--vscode-editor-background);
}

::-webkit-scrollbar-thumb
{
    background-color: var(--vscode-scrollbarSlider-background);
}
::-webkit-scrollbar-thumb:hover
{
    background-color: var(--vscode-scrollbarSlider-hoverBackground);
}
::-webkit-scrollbar-thumb:active
{
    background-color: var(--vscode-scrollbarSlider-activeBackground);
}

.emoji
{
    height: 20px;
}

pre
{
    white-space: pre-wrap;
}

.page-break
{
    display: block;
    page-break-after: always;
}

.no-page-break
{
    page-break-inside: avoid;
}
</style>
<style>/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

.vscode-dark img[src$=\#gh-light-mode-only],
.vscode-light img[src$=\#gh-dark-mode-only],
.vscode-high-contrast:not(.vscode-high-contrast-light) img[src$=\#gh-light-mode-only],
.vscode-high-contrast-light img[src$=\#gh-dark-mode-only] {
	display: none;
}
</style>
<style>/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

html, body {
	font-family: var(--markdown-font-family, -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", system-ui, "Ubuntu", "Droid Sans", sans-serif);
	font-size: var(--markdown-font-size, 14px);
	padding: 0 26px;
	line-height: var(--markdown-line-height, 22px);
	word-wrap: break-word;
}

body {
	padding-top: 1em;
}

/* Reset margin top for elements */
h1, h2, h3, h4, h5, h6,
p, ol, ul, pre {
	margin-top: 0;
}

h1, h2, h3, h4, h5, h6 {
	font-weight: 600;
	margin-top: 24px;
	margin-bottom: 16px;
	line-height: 1.25;
}

#code-csp-warning {
	position: fixed;
	top: 0;
	right: 0;
	color: white;
	margin: 16px;
	text-align: center;
	font-size: 12px;
	font-family: sans-serif;
	background-color:#444444;
	cursor: pointer;
	padding: 6px;
	box-shadow: 1px 1px 1px rgba(0,0,0,.25);
}

#code-csp-warning:hover {
	text-decoration: none;
	background-color:#007acc;
	box-shadow: 2px 2px 2px rgba(0,0,0,.25);
}

body.scrollBeyondLastLine {
	margin-bottom: calc(100vh - 22px);
}

body.showEditorSelection .code-line {
	position: relative;
}

body.showEditorSelection :not(tr,ul,ol).code-active-line:before,
body.showEditorSelection :not(tr,ul,ol).code-line:hover:before {
	content: "";
	display: block;
	position: absolute;
	top: 0;
	left: -12px;
	height: 100%;
}

.vscode-high-contrast.showEditorSelection  :not(tr,ul,ol).code-line .code-line:hover:before {
	border-left: none;
}

body.showEditorSelection li.code-active-line:before,
body.showEditorSelection li.code-line:hover:before {
	left: -30px;
}

.vscode-light.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(0, 0, 0, 0.15);
}

.vscode-light.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(0, 0, 0, 0.40);
}

.vscode-dark.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 255, 255, 0.4);
}

.vscode-dark.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 255, 255, 0.60);
}

.vscode-high-contrast.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 160, 0, 0.7);
}

.vscode-high-contrast.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 160, 0, 1);
}

/* Prevent `sub` and `sup` elements from affecting line height */
sub,
sup {
	line-height: 0;
}

ul ul:first-child,
ul ol:first-child,
ol ul:first-child,
ol ol:first-child {
	margin-bottom: 0;
}

img, video {
	max-width: 100%;
	max-height: 100%;
}

a {
	text-decoration: none;
}

a:hover {
	text-decoration: underline;
}

a:focus,
input:focus,
select:focus,
textarea:focus {
	outline: 1px solid -webkit-focus-ring-color;
	outline-offset: -1px;
}

p {
	margin-bottom: 16px;
}

li p {
	margin-bottom: 0.7em;
}

ul,
ol {
	margin-bottom: 0.7em;
}

hr {
	border: 0;
	height: 1px;
	border-bottom: 1px solid;
}

h1 {
	font-size: 2em;
	margin-top: 0;
	padding-bottom: 0.3em;
	border-bottom-width: 1px;
	border-bottom-style: solid;
}

h2 {
	font-size: 1.5em;
	padding-bottom: 0.3em;
	border-bottom-width: 1px;
	border-bottom-style: solid;
}

h3 {
	font-size: 1.25em;
}

h4 {
	font-size: 1em;
}

h5 {
	font-size: 0.875em;
}

h6 {
	font-size: 0.85em;
}

table {
	border-collapse: collapse;
	margin-bottom: 0.7em;
}

th {
	text-align: left;
	border-bottom: 1px solid;
}

th,
td {
	padding: 5px 10px;
}

table > tbody > tr + tr > td {
	border-top: 1px solid;
}

blockquote {
	margin: 0;
	padding: 0px 16px 0 10px;
	border-left-width: 5px;
	border-left-style: solid;
	border-radius: 2px;
}

code {
	font-family: var(--vscode-editor-font-family, "SF Mono", Monaco, Menlo, Consolas, "Ubuntu Mono", "Liberation Mono", "DejaVu Sans Mono", "Courier New", monospace);
	font-size: 1em;
	line-height: 1.357em;
}

body.wordWrap pre {
	white-space: pre-wrap;
}

pre:not(.hljs),
pre.hljs code > div {
	padding: 16px;
	border-radius: 3px;
	overflow: auto;
}

pre code {
	display: inline-block;
	color: var(--vscode-editor-foreground);
	tab-size: 4;
	background: none;
}

/** Theming */

pre {
	background-color: var(--vscode-textCodeBlock-background);
	border: 1px solid var(--vscode-widget-border);
}

.vscode-high-contrast h1 {
	border-color: rgb(0, 0, 0);
}

.vscode-light th {
	border-color: rgba(0, 0, 0, 0.69);
}

.vscode-dark th {
	border-color: rgba(255, 255, 255, 0.69);
}

.vscode-light h1,
.vscode-light h2,
.vscode-light hr,
.vscode-light td {
	border-color: rgba(0, 0, 0, 0.18);
}

.vscode-dark h1,
.vscode-dark h2,
.vscode-dark hr,
.vscode-dark td {
	border-color: rgba(255, 255, 255, 0.18);
}
</style>
<style>/*
https://raw.githubusercontent.com/isagalaev/highlight.js/master/src/styles/vs2015.css
*/
/*
 * Visual Studio 2015 dark style
 * Author: Nicolas LLOBERA <nllobera@gmail.com>
 */


.hljs-keyword,
.hljs-literal,
.hljs-symbol,
.hljs-name {
	color: #569CD6;
}
.hljs-link {
	color: #569CD6;
	text-decoration: underline;
}

.hljs-built_in,
.hljs-type {
	color: #4EC9B0;
}

.hljs-number,
.hljs-class {
	color: #B8D7A3;
}

.hljs-string,
.hljs-meta-string {
	color: #D69D85;
}

.hljs-regexp,
.hljs-template-tag {
	color: #9A5334;
}

.hljs-subst,
.hljs-function,
.hljs-title,
.hljs-params,
.hljs-formula {
	color: #DCDCDC;
}

.hljs-comment,
.hljs-quote {
	color: #57A64A;
	font-style: italic;
}

.hljs-doctag {
	color: #608B4E;
}

.hljs-meta,
.hljs-meta-keyword,
.hljs-tag {
	color: #9B9B9B;
}

.hljs-variable,
.hljs-template-variable {
	color: #BD63C5;
}

.hljs-attr,
.hljs-attribute,
.hljs-builtin-name {
	color: #9CDCFE;
}

.hljs-section {
	color: gold;
}

.hljs-emphasis {
	font-style: italic;
}

.hljs-strong {
	font-weight: bold;
}

/*.hljs-code {
	font-family:'Monospace';
}*/

.hljs-bullet,
.hljs-selector-tag,
.hljs-selector-id,
.hljs-selector-class,
.hljs-selector-attr,
.hljs-selector-pseudo {
	color: #D7BA7D;
}

.hljs-addition {
	background-color: var(--vscode-diffEditor-insertedTextBackground, rgba(155, 185, 85, 0.2));
	color: rgb(155, 185, 85);
	display: inline-block;
	width: 100%;
}

.hljs-deletion {
	background: var(--vscode-diffEditor-removedTextBackground, rgba(255, 0, 0, 0.2));
	color: rgb(255, 0, 0);
	display: inline-block;
	width: 100%;
}


/*
From https://raw.githubusercontent.com/isagalaev/highlight.js/master/src/styles/vs.css
*/
/*

Visual Studio-like style based on original C# coloring by Jason Diamond <jason@diamond.name>

*/

.vscode-light .hljs-function,
.vscode-light .hljs-params,
.vscode-light .hljs-number,
.vscode-light .hljs-class  {
	color: inherit;
}

.vscode-light .hljs-comment,
.vscode-light .hljs-quote,
.vscode-light .hljs-number,
.vscode-light .hljs-class,
.vscode-light .hljs-variable {
	color: #008000;
}

.vscode-light .hljs-keyword,
.vscode-light .hljs-selector-tag,
.vscode-light .hljs-name,
.vscode-light .hljs-tag {
	color: #00f;
}

.vscode-light .hljs-built_in,
.vscode-light .hljs-builtin-name {
	color: #007acc;
}

.vscode-light .hljs-string,
.vscode-light .hljs-section,
.vscode-light .hljs-attribute,
.vscode-light .hljs-literal,
.vscode-light .hljs-template-tag,
.vscode-light .hljs-template-variable,
.vscode-light .hljs-type {
	color: #a31515;
}

.vscode-light .hljs-subst,
.vscode-light .hljs-selector-attr,
.vscode-light .hljs-selector-pseudo,
.vscode-light .hljs-meta,
.vscode-light .hljs-meta-keyword {
	color: #2b91af;
}
.vscode-light .hljs-title,
.vscode-light .hljs-doctag {
	color: #808080;
}

.vscode-light .hljs-attr {
	color: #f00;
}

.vscode-light .hljs-symbol,
.vscode-light .hljs-bullet,
.vscode-light .hljs-link {
	color: #00b0e8;
}


.vscode-light .hljs-emphasis {
	font-style: italic;
}

.vscode-light .hljs-strong {
	font-weight: bold;
}
</style>
<style>@font-face{font-family:KaTeX_AMS;font-style:normal;font-weight:400;src:url(fonts/KaTeX_AMS-Regular.woff2) format("woff2"),url(fonts/KaTeX_AMS-Regular.woff) format("woff"),url(fonts/KaTeX_AMS-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Caligraphic;font-style:normal;font-weight:700;src:url(fonts/KaTeX_Caligraphic-Bold.woff2) format("woff2"),url(fonts/KaTeX_Caligraphic-Bold.woff) format("woff"),url(fonts/KaTeX_Caligraphic-Bold.ttf) format("truetype")}@font-face{font-family:KaTeX_Caligraphic;font-style:normal;font-weight:400;src:url(fonts/KaTeX_Caligraphic-Regular.woff2) format("woff2"),url(fonts/KaTeX_Caligraphic-Regular.woff) format("woff"),url(fonts/KaTeX_Caligraphic-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Fraktur;font-style:normal;font-weight:700;src:url(fonts/KaTeX_Fraktur-Bold.woff2) format("woff2"),url(fonts/KaTeX_Fraktur-Bold.woff) format("woff"),url(fonts/KaTeX_Fraktur-Bold.ttf) format("truetype")}@font-face{font-family:KaTeX_Fraktur;font-style:normal;font-weight:400;src:url(fonts/KaTeX_Fraktur-Regular.woff2) format("woff2"),url(fonts/KaTeX_Fraktur-Regular.woff) format("woff"),url(fonts/KaTeX_Fraktur-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Main;font-style:normal;font-weight:700;src:url(fonts/KaTeX_Main-Bold.woff2) format("woff2"),url(fonts/KaTeX_Main-Bold.woff) format("woff"),url(fonts/KaTeX_Main-Bold.ttf) format("truetype")}@font-face{font-family:KaTeX_Main;font-style:italic;font-weight:700;src:url(fonts/KaTeX_Main-BoldItalic.woff2) format("woff2"),url(fonts/KaTeX_Main-BoldItalic.woff) format("woff"),url(fonts/KaTeX_Main-BoldItalic.ttf) format("truetype")}@font-face{font-family:KaTeX_Main;font-style:italic;font-weight:400;src:url(fonts/KaTeX_Main-Italic.woff2) format("woff2"),url(fonts/KaTeX_Main-Italic.woff) format("woff"),url(fonts/KaTeX_Main-Italic.ttf) format("truetype")}@font-face{font-family:KaTeX_Main;font-style:normal;font-weight:400;src:url(fonts/KaTeX_Main-Regular.woff2) format("woff2"),url(fonts/KaTeX_Main-Regular.woff) format("woff"),url(fonts/KaTeX_Main-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Math;font-style:italic;font-weight:700;src:url(fonts/KaTeX_Math-BoldItalic.woff2) format("woff2"),url(fonts/KaTeX_Math-BoldItalic.woff) format("woff"),url(fonts/KaTeX_Math-BoldItalic.ttf) format("truetype")}@font-face{font-family:KaTeX_Math;font-style:italic;font-weight:400;src:url(fonts/KaTeX_Math-Italic.woff2) format("woff2"),url(fonts/KaTeX_Math-Italic.woff) format("woff"),url(fonts/KaTeX_Math-Italic.ttf) format("truetype")}@font-face{font-family:"KaTeX_SansSerif";font-style:normal;font-weight:700;src:url(fonts/KaTeX_SansSerif-Bold.woff2) format("woff2"),url(fonts/KaTeX_SansSerif-Bold.woff) format("woff"),url(fonts/KaTeX_SansSerif-Bold.ttf) format("truetype")}@font-face{font-family:"KaTeX_SansSerif";font-style:italic;font-weight:400;src:url(fonts/KaTeX_SansSerif-Italic.woff2) format("woff2"),url(fonts/KaTeX_SansSerif-Italic.woff) format("woff"),url(fonts/KaTeX_SansSerif-Italic.ttf) format("truetype")}@font-face{font-family:"KaTeX_SansSerif";font-style:normal;font-weight:400;src:url(fonts/KaTeX_SansSerif-Regular.woff2) format("woff2"),url(fonts/KaTeX_SansSerif-Regular.woff) format("woff"),url(fonts/KaTeX_SansSerif-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Script;font-style:normal;font-weight:400;src:url(fonts/KaTeX_Script-Regular.woff2) format("woff2"),url(fonts/KaTeX_Script-Regular.woff) format("woff"),url(fonts/KaTeX_Script-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Size1;font-style:normal;font-weight:400;src:url(fonts/KaTeX_Size1-Regular.woff2) format("woff2"),url(fonts/KaTeX_Size1-Regular.woff) format("woff"),url(fonts/KaTeX_Size1-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Size2;font-style:normal;font-weight:400;src:url(fonts/KaTeX_Size2-Regular.woff2) format("woff2"),url(fonts/KaTeX_Size2-Regular.woff) format("woff"),url(fonts/KaTeX_Size2-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Size3;font-style:normal;font-weight:400;src:url(fonts/KaTeX_Size3-Regular.woff2) format("woff2"),url(fonts/KaTeX_Size3-Regular.woff) format("woff"),url(fonts/KaTeX_Size3-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Size4;font-style:normal;font-weight:400;src:url(fonts/KaTeX_Size4-Regular.woff2) format("woff2"),url(fonts/KaTeX_Size4-Regular.woff) format("woff"),url(fonts/KaTeX_Size4-Regular.ttf) format("truetype")}@font-face{font-family:KaTeX_Typewriter;font-style:normal;font-weight:400;src:url(fonts/KaTeX_Typewriter-Regular.woff2) format("woff2"),url(fonts/KaTeX_Typewriter-Regular.woff) format("woff"),url(fonts/KaTeX_Typewriter-Regular.ttf) format("truetype")}.katex{font:normal 1.21em KaTeX_Main,Times New Roman,serif;line-height:1.2;text-indent:0;text-rendering:auto}.katex *{-ms-high-contrast-adjust:none!important;border-color:currentColor}.katex .katex-version:after{content:"0.16.10"}.katex .katex-mathml{clip:rect(1px,1px,1px,1px);border:0;height:1px;overflow:hidden;padding:0;position:absolute;width:1px}.katex .katex-html>.newline{display:block}.katex .base{position:relative;white-space:nowrap;width:-webkit-min-content;width:-moz-min-content;width:min-content}.katex .base,.katex .strut{display:inline-block}.katex .textbf{font-weight:700}.katex .textit{font-style:italic}.katex .textrm{font-family:KaTeX_Main}.katex .textsf{font-family:KaTeX_SansSerif}.katex .texttt{font-family:KaTeX_Typewriter}.katex .mathnormal{font-family:KaTeX_Math;font-style:italic}.katex .mathit{font-family:KaTeX_Main;font-style:italic}.katex .mathrm{font-style:normal}.katex .mathbf{font-family:KaTeX_Main;font-weight:700}.katex .boldsymbol{font-family:KaTeX_Math;font-style:italic;font-weight:700}.katex .amsrm,.katex .mathbb,.katex .textbb{font-family:KaTeX_AMS}.katex .mathcal{font-family:KaTeX_Caligraphic}.katex .mathfrak,.katex .textfrak{font-family:KaTeX_Fraktur}.katex .mathboldfrak,.katex .textboldfrak{font-family:KaTeX_Fraktur;font-weight:700}.katex .mathtt{font-family:KaTeX_Typewriter}.katex .mathscr,.katex .textscr{font-family:KaTeX_Script}.katex .mathsf,.katex .textsf{font-family:KaTeX_SansSerif}.katex .mathboldsf,.katex .textboldsf{font-family:KaTeX_SansSerif;font-weight:700}.katex .mathitsf,.katex .textitsf{font-family:KaTeX_SansSerif;font-style:italic}.katex .mainrm{font-family:KaTeX_Main;font-style:normal}.katex .vlist-t{border-collapse:collapse;display:inline-table;table-layout:fixed}.katex .vlist-r{display:table-row}.katex .vlist{display:table-cell;position:relative;vertical-align:bottom}.katex .vlist>span{display:block;height:0;position:relative}.katex .vlist>span>span{display:inline-block}.katex .vlist>span>.pstrut{overflow:hidden;width:0}.katex .vlist-t2{margin-right:-2px}.katex .vlist-s{display:table-cell;font-size:1px;min-width:2px;vertical-align:bottom;width:2px}.katex .vbox{align-items:baseline;display:inline-flex;flex-direction:column}.katex .hbox{width:100%}.katex .hbox,.katex .thinbox{display:inline-flex;flex-direction:row}.katex .thinbox{max-width:0;width:0}.katex .msupsub{text-align:left}.katex .mfrac>span>span{text-align:center}.katex .mfrac .frac-line{border-bottom-style:solid;display:inline-block;width:100%}.katex .hdashline,.katex .hline,.katex .mfrac .frac-line,.katex .overline .overline-line,.katex .rule,.katex .underline .underline-line{min-height:1px}.katex .mspace{display:inline-block}.katex .clap,.katex .llap,.katex .rlap{position:relative;width:0}.katex .clap>.inner,.katex .llap>.inner,.katex .rlap>.inner{position:absolute}.katex .clap>.fix,.katex .llap>.fix,.katex .rlap>.fix{display:inline-block}.katex .llap>.inner{right:0}.katex .clap>.inner,.katex .rlap>.inner{left:0}.katex .clap>.inner>span{margin-left:-50%;margin-right:50%}.katex .rule{border:0 solid;display:inline-block;position:relative}.katex .hline,.katex .overline .overline-line,.katex .underline .underline-line{border-bottom-style:solid;display:inline-block;width:100%}.katex .hdashline{border-bottom-style:dashed;display:inline-block;width:100%}.katex .sqrt>.root{margin-left:.27777778em;margin-right:-.55555556em}.katex .fontsize-ensurer.reset-size1.size1,.katex .sizing.reset-size1.size1{font-size:1em}.katex .fontsize-ensurer.reset-size1.size2,.katex .sizing.reset-size1.size2{font-size:1.2em}.katex .fontsize-ensurer.reset-size1.size3,.katex .sizing.reset-size1.size3{font-size:1.4em}.katex .fontsize-ensurer.reset-size1.size4,.katex .sizing.reset-size1.size4{font-size:1.6em}.katex .fontsize-ensurer.reset-size1.size5,.katex .sizing.reset-size1.size5{font-size:1.8em}.katex .fontsize-ensurer.reset-size1.size6,.katex .sizing.reset-size1.size6{font-size:2em}.katex .fontsize-ensurer.reset-size1.size7,.katex .sizing.reset-size1.size7{font-size:2.4em}.katex .fontsize-ensurer.reset-size1.size8,.katex .sizing.reset-size1.size8{font-size:2.88em}.katex .fontsize-ensurer.reset-size1.size9,.katex .sizing.reset-size1.size9{font-size:3.456em}.katex .fontsize-ensurer.reset-size1.size10,.katex .sizing.reset-size1.size10{font-size:4.148em}.katex .fontsize-ensurer.reset-size1.size11,.katex .sizing.reset-size1.size11{font-size:4.976em}.katex .fontsize-ensurer.reset-size2.size1,.katex .sizing.reset-size2.size1{font-size:.83333333em}.katex .fontsize-ensurer.reset-size2.size2,.katex .sizing.reset-size2.size2{font-size:1em}.katex .fontsize-ensurer.reset-size2.size3,.katex .sizing.reset-size2.size3{font-size:1.16666667em}.katex .fontsize-ensurer.reset-size2.size4,.katex .sizing.reset-size2.size4{font-size:1.33333333em}.katex .fontsize-ensurer.reset-size2.size5,.katex .sizing.reset-size2.size5{font-size:1.5em}.katex .fontsize-ensurer.reset-size2.size6,.katex .sizing.reset-size2.size6{font-size:1.66666667em}.katex .fontsize-ensurer.reset-size2.size7,.katex .sizing.reset-size2.size7{font-size:2em}.katex .fontsize-ensurer.reset-size2.size8,.katex .sizing.reset-size2.size8{font-size:2.4em}.katex .fontsize-ensurer.reset-size2.size9,.katex .sizing.reset-size2.size9{font-size:2.88em}.katex .fontsize-ensurer.reset-size2.size10,.katex .sizing.reset-size2.size10{font-size:3.45666667em}.katex .fontsize-ensurer.reset-size2.size11,.katex .sizing.reset-size2.size11{font-size:4.14666667em}.katex .fontsize-ensurer.reset-size3.size1,.katex .sizing.reset-size3.size1{font-size:.71428571em}.katex .fontsize-ensurer.reset-size3.size2,.katex .sizing.reset-size3.size2{font-size:.85714286em}.katex .fontsize-ensurer.reset-size3.size3,.katex .sizing.reset-size3.size3{font-size:1em}.katex .fontsize-ensurer.reset-size3.size4,.katex .sizing.reset-size3.size4{font-size:1.14285714em}.katex .fontsize-ensurer.reset-size3.size5,.katex .sizing.reset-size3.size5{font-size:1.28571429em}.katex .fontsize-ensurer.reset-size3.size6,.katex .sizing.reset-size3.size6{font-size:1.42857143em}.katex .fontsize-ensurer.reset-size3.size7,.katex .sizing.reset-size3.size7{font-size:1.71428571em}.katex .fontsize-ensurer.reset-size3.size8,.katex .sizing.reset-size3.size8{font-size:2.05714286em}.katex .fontsize-ensurer.reset-size3.size9,.katex .sizing.reset-size3.size9{font-size:2.46857143em}.katex .fontsize-ensurer.reset-size3.size10,.katex .sizing.reset-size3.size10{font-size:2.96285714em}.katex .fontsize-ensurer.reset-size3.size11,.katex .sizing.reset-size3.size11{font-size:3.55428571em}.katex .fontsize-ensurer.reset-size4.size1,.katex .sizing.reset-size4.size1{font-size:.625em}.katex .fontsize-ensurer.reset-size4.size2,.katex .sizing.reset-size4.size2{font-size:.75em}.katex .fontsize-ensurer.reset-size4.size3,.katex .sizing.reset-size4.size3{font-size:.875em}.katex .fontsize-ensurer.reset-size4.size4,.katex .sizing.reset-size4.size4{font-size:1em}.katex .fontsize-ensurer.reset-size4.size5,.katex .sizing.reset-size4.size5{font-size:1.125em}.katex .fontsize-ensurer.reset-size4.size6,.katex .sizing.reset-size4.size6{font-size:1.25em}.katex .fontsize-ensurer.reset-size4.size7,.katex .sizing.reset-size4.size7{font-size:1.5em}.katex .fontsize-ensurer.reset-size4.size8,.katex .sizing.reset-size4.size8{font-size:1.8em}.katex .fontsize-ensurer.reset-size4.size9,.katex .sizing.reset-size4.size9{font-size:2.16em}.katex .fontsize-ensurer.reset-size4.size10,.katex .sizing.reset-size4.size10{font-size:2.5925em}.katex .fontsize-ensurer.reset-size4.size11,.katex .sizing.reset-size4.size11{font-size:3.11em}.katex .fontsize-ensurer.reset-size5.size1,.katex .sizing.reset-size5.size1{font-size:.55555556em}.katex .fontsize-ensurer.reset-size5.size2,.katex .sizing.reset-size5.size2{font-size:.66666667em}.katex .fontsize-ensurer.reset-size5.size3,.katex .sizing.reset-size5.size3{font-size:.77777778em}.katex .fontsize-ensurer.reset-size5.size4,.katex .sizing.reset-size5.size4{font-size:.88888889em}.katex .fontsize-ensurer.reset-size5.size5,.katex .sizing.reset-size5.size5{font-size:1em}.katex .fontsize-ensurer.reset-size5.size6,.katex .sizing.reset-size5.size6{font-size:1.11111111em}.katex .fontsize-ensurer.reset-size5.size7,.katex .sizing.reset-size5.size7{font-size:1.33333333em}.katex .fontsize-ensurer.reset-size5.size8,.katex .sizing.reset-size5.size8{font-size:1.6em}.katex .fontsize-ensurer.reset-size5.size9,.katex .sizing.reset-size5.size9{font-size:1.92em}.katex .fontsize-ensurer.reset-size5.size10,.katex .sizing.reset-size5.size10{font-size:2.30444444em}.katex .fontsize-ensurer.reset-size5.size11,.katex .sizing.reset-size5.size11{font-size:2.76444444em}.katex .fontsize-ensurer.reset-size6.size1,.katex .sizing.reset-size6.size1{font-size:.5em}.katex .fontsize-ensurer.reset-size6.size2,.katex .sizing.reset-size6.size2{font-size:.6em}.katex .fontsize-ensurer.reset-size6.size3,.katex .sizing.reset-size6.size3{font-size:.7em}.katex .fontsize-ensurer.reset-size6.size4,.katex .sizing.reset-size6.size4{font-size:.8em}.katex .fontsize-ensurer.reset-size6.size5,.katex .sizing.reset-size6.size5{font-size:.9em}.katex .fontsize-ensurer.reset-size6.size6,.katex .sizing.reset-size6.size6{font-size:1em}.katex .fontsize-ensurer.reset-size6.size7,.katex .sizing.reset-size6.size7{font-size:1.2em}.katex .fontsize-ensurer.reset-size6.size8,.katex .sizing.reset-size6.size8{font-size:1.44em}.katex .fontsize-ensurer.reset-size6.size9,.katex .sizing.reset-size6.size9{font-size:1.728em}.katex .fontsize-ensurer.reset-size6.size10,.katex .sizing.reset-size6.size10{font-size:2.074em}.katex .fontsize-ensurer.reset-size6.size11,.katex .sizing.reset-size6.size11{font-size:2.488em}.katex .fontsize-ensurer.reset-size7.size1,.katex .sizing.reset-size7.size1{font-size:.41666667em}.katex .fontsize-ensurer.reset-size7.size2,.katex .sizing.reset-size7.size2{font-size:.5em}.katex .fontsize-ensurer.reset-size7.size3,.katex .sizing.reset-size7.size3{font-size:.58333333em}.katex .fontsize-ensurer.reset-size7.size4,.katex .sizing.reset-size7.size4{font-size:.66666667em}.katex .fontsize-ensurer.reset-size7.size5,.katex .sizing.reset-size7.size5{font-size:.75em}.katex .fontsize-ensurer.reset-size7.size6,.katex .sizing.reset-size7.size6{font-size:.83333333em}.katex .fontsize-ensurer.reset-size7.size7,.katex .sizing.reset-size7.size7{font-size:1em}.katex .fontsize-ensurer.reset-size7.size8,.katex .sizing.reset-size7.size8{font-size:1.2em}.katex .fontsize-ensurer.reset-size7.size9,.katex .sizing.reset-size7.size9{font-size:1.44em}.katex .fontsize-ensurer.reset-size7.size10,.katex .sizing.reset-size7.size10{font-size:1.72833333em}.katex .fontsize-ensurer.reset-size7.size11,.katex .sizing.reset-size7.size11{font-size:2.07333333em}.katex .fontsize-ensurer.reset-size8.size1,.katex .sizing.reset-size8.size1{font-size:.34722222em}.katex .fontsize-ensurer.reset-size8.size2,.katex .sizing.reset-size8.size2{font-size:.41666667em}.katex .fontsize-ensurer.reset-size8.size3,.katex .sizing.reset-size8.size3{font-size:.48611111em}.katex .fontsize-ensurer.reset-size8.size4,.katex .sizing.reset-size8.size4{font-size:.55555556em}.katex .fontsize-ensurer.reset-size8.size5,.katex .sizing.reset-size8.size5{font-size:.625em}.katex .fontsize-ensurer.reset-size8.size6,.katex .sizing.reset-size8.size6{font-size:.69444444em}.katex .fontsize-ensurer.reset-size8.size7,.katex .sizing.reset-size8.size7{font-size:.83333333em}.katex .fontsize-ensurer.reset-size8.size8,.katex .sizing.reset-size8.size8{font-size:1em}.katex .fontsize-ensurer.reset-size8.size9,.katex .sizing.reset-size8.size9{font-size:1.2em}.katex .fontsize-ensurer.reset-size8.size10,.katex .sizing.reset-size8.size10{font-size:1.44027778em}.katex .fontsize-ensurer.reset-size8.size11,.katex .sizing.reset-size8.size11{font-size:1.72777778em}.katex .fontsize-ensurer.reset-size9.size1,.katex .sizing.reset-size9.size1{font-size:.28935185em}.katex .fontsize-ensurer.reset-size9.size2,.katex .sizing.reset-size9.size2{font-size:.34722222em}.katex .fontsize-ensurer.reset-size9.size3,.katex .sizing.reset-size9.size3{font-size:.40509259em}.katex .fontsize-ensurer.reset-size9.size4,.katex .sizing.reset-size9.size4{font-size:.46296296em}.katex .fontsize-ensurer.reset-size9.size5,.katex .sizing.reset-size9.size5{font-size:.52083333em}.katex .fontsize-ensurer.reset-size9.size6,.katex .sizing.reset-size9.size6{font-size:.5787037em}.katex .fontsize-ensurer.reset-size9.size7,.katex .sizing.reset-size9.size7{font-size:.69444444em}.katex .fontsize-ensurer.reset-size9.size8,.katex .sizing.reset-size9.size8{font-size:.83333333em}.katex .fontsize-ensurer.reset-size9.size9,.katex .sizing.reset-size9.size9{font-size:1em}.katex .fontsize-ensurer.reset-size9.size10,.katex .sizing.reset-size9.size10{font-size:1.20023148em}.katex .fontsize-ensurer.reset-size9.size11,.katex .sizing.reset-size9.size11{font-size:1.43981481em}.katex .fontsize-ensurer.reset-size10.size1,.katex .sizing.reset-size10.size1{font-size:.24108004em}.katex .fontsize-ensurer.reset-size10.size2,.katex .sizing.reset-size10.size2{font-size:.28929605em}.katex .fontsize-ensurer.reset-size10.size3,.katex .sizing.reset-size10.size3{font-size:.33751205em}.katex .fontsize-ensurer.reset-size10.size4,.katex .sizing.reset-size10.size4{font-size:.38572806em}.katex .fontsize-ensurer.reset-size10.size5,.katex .sizing.reset-size10.size5{font-size:.43394407em}.katex .fontsize-ensurer.reset-size10.size6,.katex .sizing.reset-size10.size6{font-size:.48216008em}.katex .fontsize-ensurer.reset-size10.size7,.katex .sizing.reset-size10.size7{font-size:.57859209em}.katex .fontsize-ensurer.reset-size10.size8,.katex .sizing.reset-size10.size8{font-size:.69431051em}.katex .fontsize-ensurer.reset-size10.size9,.katex .sizing.reset-size10.size9{font-size:.83317261em}.katex .fontsize-ensurer.reset-size10.size10,.katex .sizing.reset-size10.size10{font-size:1em}.katex .fontsize-ensurer.reset-size10.size11,.katex .sizing.reset-size10.size11{font-size:1.19961427em}.katex .fontsize-ensurer.reset-size11.size1,.katex .sizing.reset-size11.size1{font-size:.20096463em}.katex .fontsize-ensurer.reset-size11.size2,.katex .sizing.reset-size11.size2{font-size:.24115756em}.katex .fontsize-ensurer.reset-size11.size3,.katex .sizing.reset-size11.size3{font-size:.28135048em}.katex .fontsize-ensurer.reset-size11.size4,.katex .sizing.reset-size11.size4{font-size:.32154341em}.katex .fontsize-ensurer.reset-size11.size5,.katex .sizing.reset-size11.size5{font-size:.36173633em}.katex .fontsize-ensurer.reset-size11.size6,.katex .sizing.reset-size11.size6{font-size:.40192926em}.katex .fontsize-ensurer.reset-size11.size7,.katex .sizing.reset-size11.size7{font-size:.48231511em}.katex .fontsize-ensurer.reset-size11.size8,.katex .sizing.reset-size11.size8{font-size:.57877814em}.katex .fontsize-ensurer.reset-size11.size9,.katex .sizing.reset-size11.size9{font-size:.69453376em}.katex .fontsize-ensurer.reset-size11.size10,.katex .sizing.reset-size11.size10{font-size:.83360129em}.katex .fontsize-ensurer.reset-size11.size11,.katex .sizing.reset-size11.size11{font-size:1em}.katex .delimsizing.size1{font-family:KaTeX_Size1}.katex .delimsizing.size2{font-family:KaTeX_Size2}.katex .delimsizing.size3{font-family:KaTeX_Size3}.katex .delimsizing.size4{font-family:KaTeX_Size4}.katex .delimsizing.mult .delim-size1>span{font-family:KaTeX_Size1}.katex .delimsizing.mult .delim-size4>span{font-family:KaTeX_Size4}.katex .nulldelimiter{display:inline-block;width:.12em}.katex .delimcenter,.katex .op-symbol{position:relative}.katex .op-symbol.small-op{font-family:KaTeX_Size1}.katex .op-symbol.large-op{font-family:KaTeX_Size2}.katex .accent>.vlist-t,.katex .op-limits>.vlist-t{text-align:center}.katex .accent .accent-body{position:relative}.katex .accent .accent-body:not(.accent-full){width:0}.katex .overlay{display:block}.katex .mtable .vertical-separator{display:inline-block;min-width:1px}.katex .mtable .arraycolsep{display:inline-block}.katex .mtable .col-align-c>.vlist-t{text-align:center}.katex .mtable .col-align-l>.vlist-t{text-align:left}.katex .mtable .col-align-r>.vlist-t{text-align:right}.katex .svg-align{text-align:left}.katex svg{fill:currentColor;stroke:currentColor;fill-rule:nonzero;fill-opacity:1;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;display:block;height:inherit;position:absolute;width:100%}.katex svg path{stroke:none}.katex img{border-style:none;max-height:none;max-width:none;min-height:0;min-width:0}.katex .stretchy{display:block;overflow:hidden;position:relative;width:100%}.katex .stretchy:after,.katex .stretchy:before{content:""}.katex .hide-tail{overflow:hidden;position:relative;width:100%}.katex .halfarrow-left{left:0;overflow:hidden;position:absolute;width:50.2%}.katex .halfarrow-right{overflow:hidden;position:absolute;right:0;width:50.2%}.katex .brace-left{left:0;overflow:hidden;position:absolute;width:25.1%}.katex .brace-center{left:25%;overflow:hidden;position:absolute;width:50%}.katex .brace-right{overflow:hidden;position:absolute;right:0;width:25.1%}.katex .x-arrow-pad{padding:0 .5em}.katex .cd-arrow-pad{padding:0 .55556em 0 .27778em}.katex .mover,.katex .munder,.katex .x-arrow{text-align:center}.katex .boxpad{padding:0 .3em}.katex .fbox,.katex .fcolorbox{border:.04em solid;box-sizing:border-box}.katex .cancel-pad{padding:0 .2em}.katex .cancel-lap{margin-left:-.2em;margin-right:-.2em}.katex .sout{border-bottom-style:solid;border-bottom-width:.08em}.katex .angl{border-right:.049em solid;border-top:.049em solid;box-sizing:border-box;margin-right:.03889em}.katex .anglpad{padding:0 .03889em}.katex .eqn-num:before{content:"(" counter(katexEqnNo) ")";counter-increment:katexEqnNo}.katex .mml-eqn-num:before{content:"(" counter(mmlEqnNo) ")";counter-increment:mmlEqnNo}.katex .mtr-glue{width:50%}.katex .cd-vert-arrow{display:inline-block;position:relative}.katex .cd-label-left{display:inline-block;position:absolute;right:calc(50% + .3em);text-align:left}.katex .cd-label-right{display:inline-block;left:calc(50% + .3em);position:absolute;text-align:right}.katex-display{display:block;margin:1em 0;text-align:center}.katex-display>.katex{display:block;text-align:center;white-space:nowrap}.katex-display>.katex>.katex-html{display:block;position:relative}.katex-display>.katex>.katex-html>.tag{position:absolute;right:0}.katex-display.leqno>.katex>.katex-html>.tag{left:0;right:auto}.katex-display.fleqn>.katex{padding-left:2em;text-align:left}body{counter-reset:katexEqnNo mmlEqnNo}
</style>
<style>/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

.katex-error {
	color: var(--vscode-editorError-foreground);
}
</style>

    </head>
    <body class="vscode-body vscode-light">
        <h1 data-line="0" class="code-line" dir="auto" id="azure-kubernetes-baseline---the-hard-way-part-deux" tabindex="-1">Azure Kubernetes Baseline - The Hard Way, Part Deux</h1>
<h2 data-line="2" class="code-line" dir="auto" id="workload-protection" tabindex="-1">Workload Protection</h2>
<p data-line="4" class="code-line" dir="auto">The objective of this chapter is to provide a concise guide on how to implement workload identity and network policy in AKS. These features enable secure access to Azure KeyVault and control traffic flow between pods, providing an additional layer of security for your AKS cluster. By following the steps in this chapter, you will learn how to configure workload identity, network policy in AKS and Azure KeyVault.</p>
<h2 data-line="7" class="code-line" dir="auto" id="11-deployment" tabindex="-1">1.1 Deployment</h2>
<p data-line="8" class="code-line" dir="auto">First, create some environment variables, to make life easier.</p>
<h3 data-line="11" class="code-line" dir="auto" id="111-prepare-environment-variables-for-infrastructure" tabindex="-1">1.1.1 Prepare Environment Variables for Infrastructure</h3>
<blockquote data-line="14" class="code-line" dir="auto">
<p data-line="14" class="code-line" dir="auto">[!Note]
The Azure KeyVault name is a global name that must be unique.</p>
</blockquote>
<pre><code data-line="17" class="code-line" dir="auto">FRONTEND_NAMESPACE="frontend"
BACKEND_NAMESPACE="backend"
SERVICE_ACCOUNT_NAME="workload-identity-sa"
SUBSCRIPTION="$(az account show --query id --output tsv)"
USER_ASSIGNED_IDENTITY_NAME="keyvaultreader"
FEDERATED_IDENTITY_CREDENTIAL_NAME="keyvaultfederated"
KEYVAULT_NAME="&lt;DEFINE A KEYVAULT NAME HERE&gt;"
KEYVAULT_SECRET_NAME="redissecret"
</code></pre>
<h3 data-line="28" class="code-line" dir="auto" id="112-update-aks-cluster-with-oidc-issuer" tabindex="-1">1.1.2 Update AKS Cluster with OIDC Issuer</h3>
<p data-line="30" class="code-line" dir="auto">Enable the existing cluster to use OpenID connect (OIDC) as an authentication protocol for Kubernetes API server (unless already done). This allows the cluster to integrate with Microsoft Entra ID and other identity providers that support OIDC.</p>
<pre><code data-line="32" class="code-line language-bash" dir="auto">az aks update -g <span class="hljs-variable">$SPOKE_RG</span> -n <span class="hljs-variable">$AKS_CLUSTER_NAME</span>-<span class="hljs-variable">${STUDENT_NAME}</span>   --enable-oidc-issuer 
</code></pre>
<p data-line="36" class="code-line" dir="auto">Get the OICD issuer URL. Query the AKS cluster for the OICD issuer URL with the following command, which stores the reult in an environment variable.</p>
<pre><code data-line="38" class="code-line language-bash" dir="auto">AKS_OIDC_ISSUER=<span class="hljs-string">"<span class="hljs-subst">$(az aks show -n $AKS_CLUSTER_NAME-${STUDENT_NAME} -g $SPOKE_RG  --query <span class="hljs-string">"oidcIssuerProfile.issuerUrl"</span> -otsv)</span>"</span>
</code></pre>
<p data-line="42" class="code-line" dir="auto">The variable should contain the Issuer URL similar to the following:
<code>https://eastus.oic.prod-aks.azure.com/9e08065f-6106-4526-9b01-d6c64753fe02/9a518161-4400-4e57-9913-d8d82344b504/</code></p>
<h3 data-line="45" class="code-line" dir="auto" id="113-create-azure-keyvault" tabindex="-1">1.1.3 Create Azure KeyVault</h3>
<p data-line="47" class="code-line" dir="auto">Create the Azure Keyvault instance. When creating the Keyvault, use "deny as a default" action for the network access policy, which means that only the specified IP addresses or virtual networks can access the key vault.</p>
<p data-line="49" class="code-line" dir="auto">Your bastion host will be allowed, so use that one when you interact with Keyvault later.</p>
<pre><code data-line="51" class="code-line language-bash" dir="auto">az keyvault create -n <span class="hljs-variable">$KEYVAULT_NAME</span> -g <span class="hljs-variable">$SPOKE_RG</span> -l <span class="hljs-variable">$LOCATION</span> --default-action deny
</code></pre>
<p data-line="55" class="code-line" dir="auto">Create a private DNS zone for the Azure Keyvault.</p>
<pre><code data-line="57" class="code-line language-bash" dir="auto">az network private-dns zone create --resource-group <span class="hljs-variable">$SPOKE_RG</span> --name privatelink.vaultcore.azure.net
</code></pre>
<p data-line="61" class="code-line" dir="auto">Link the Private DNS Zone to the HUB and SPOKE Virtual Network</p>
<pre><code data-line="63" class="code-line language-bash" dir="auto">az network private-dns <span class="hljs-built_in">link</span> vnet create --resource-group <span class="hljs-variable">$SPOKE_RG</span> --virtual-network <span class="hljs-variable">$HUB_VNET_ID</span> --zone-name privatelink.vaultcore.azure.net --name hubvnetkvdnsconfig --registration-enabled <span class="hljs-literal">false</span>

az network private-dns <span class="hljs-built_in">link</span> vnet create --resource-group <span class="hljs-variable">$SPOKE_RG</span> --virtual-network <span class="hljs-variable">$SPOKE_VNET_NAME</span> --zone-name privatelink.vaultcore.azure.net --name spokevnetkvdnsconfig --registration-enabled <span class="hljs-literal">false</span>
</code></pre>
<p data-line="69" class="code-line" dir="auto">Create a private endpoint for the Keyvault</p>
<p data-line="71" class="code-line" dir="auto">First we need to obtain the KeyVault ID in order to deploy the private endpoint.</p>
<pre><code data-line="73" class="code-line language-bash" dir="auto">KEYVAULT_ID=$(az keyvault show --name <span class="hljs-variable">$KEYVAULT_NAME</span> \
  --query <span class="hljs-string">'id'</span> --output tsv)
</code></pre>
<p data-line="77" class="code-line" dir="auto">Create the private endpoint in endpoint subnet.</p>
<pre><code data-line="79" class="code-line language-bash" dir="auto">az network private-endpoint create --resource-group <span class="hljs-variable">$SPOKE_RG</span> --vnet-name <span class="hljs-variable">$SPOKE_VNET_NAME</span> --subnet <span class="hljs-variable">$ENDPOINTS_SUBNET_NAME</span> --name KVPrivateEndpoint --private-connection-resource-id <span class="hljs-variable">$KEYVAULT_ID</span> --group-ids vault --connection-name PrivateKVConnection --location <span class="hljs-variable">$LOCATION</span>
</code></pre>
<p data-line="83" class="code-line" dir="auto">Fetch IP of the private endpoint and create an <em>A record</em> in the private DNS zone.</p>
<p data-line="85" class="code-line" dir="auto">Obtain the IP address of the private endpoint NIC card.</p>
<pre><code data-line="86" class="code-line language-bash" dir="auto">KV_PRIVATE_IP=$(az network private-endpoint show -g <span class="hljs-variable">$SPOKE_RG</span> -n KVPrivateEndpoint \
 --query <span class="hljs-string">'customDnsConfigs[0].ipAddresses[0]'</span> --output tsv)
</code></pre>
<p data-line="90" class="code-line" dir="auto">Note the private IP address down.</p>
<pre><code data-line="92" class="code-line language-bash" dir="auto"><span class="hljs-built_in">echo</span> <span class="hljs-variable">$KV_PRIVATE_IP</span>
</code></pre>
<p data-line="96" class="code-line" dir="auto">Create the A record in DNS zone and point it to the private endpoint IP of the Keyvault.</p>
<pre><code data-line="98" class="code-line language-bash" dir="auto">  az network private-dns record-set a create \
  --name <span class="hljs-variable">$KEYVAULT_NAME</span> \
  --zone-name privatelink.vaultcore.azure.net \
  --resource-group <span class="hljs-variable">$SPOKE_RG</span>
</code></pre>
<p data-line="104" class="code-line" dir="auto">Point the A record to the private endpoint IP of the Keyvault.</p>
<pre><code data-line="105" class="code-line language-bash" dir="auto"> az network private-dns record-set a add-record -g <span class="hljs-variable">$SPOKE_RG</span> -z <span class="hljs-string">"privatelink.vaultcore.azure.net"</span> -n <span class="hljs-variable">$KEYVAULT_NAME</span> -a <span class="hljs-variable">$KV_PRIVATE_IP</span>
</code></pre>
<p data-line="110" class="code-line" dir="auto">Validate your deployment in the Azure portal.</p>
<ol data-line="113" class="code-line" dir="auto">
<li data-line="113" class="code-line" dir="auto">
<p data-line="113" class="code-line" dir="auto">Navigate to the Azure portal at <a href="https://portal.azure.com" data-href="https://portal.azure.com">https://portal.azure.com</a> and enter your login credentials.</p>
</li>
<li data-line="115" class="code-line" dir="auto">
<p data-line="115" class="code-line" dir="auto">Once logged in, click on <strong>Resource groups</strong> to view all of your resource groups in your subscription. You should see the 3 Resouce groups created during previous steps: <strong>MC_rg-spoke_private-aks-xxxx_eastus</strong>, <strong>rg-hub</strong> and <strong>rg-spoke</strong>.</p>
</li>
</ol>

<img src="https://raw.githubusercontent.com/pelithne/AKS_secure_baseline_the_hard_way_part_two/main/images/aks-baseline-architecture-workshop.jpg" width="600">


<p data-line="117" class="code-line" dir="auto">Select <strong>rg-spoke</strong></p>
<p data-line="119" class="code-line" dir="auto"><img src="https://raw.githubusercontent.com/pelithne/AKS_secure_baseline_the_hard_way_part_two/main/images/resourcegroups.jpg" alt="Screenshot" data-src="images/resourcegroups.jpg"></p>
<ol start="3" data-line="121" class="code-line" dir="auto">
<li data-line="121" class="code-line" dir="auto">
<p data-line="121" class="code-line" dir="auto">Verify that the following resources exists: an <strong>Azure KeyVault instance</strong>, <strong>KeyVault private endpoint</strong>, <strong>Private endpoint Network interface</strong>, and a private DNS zone called <strong>privatelink.vaultcore.azure.net</strong>.
<img src="https://raw.githubusercontent.com/pelithne/AKS_secure_baseline_the_hard_way_part_two/main/images/kevaultresourcegroupview.jpg" alt="Screenshot" data-src="images/kevaultresourcegroupview.jpg"></p>
</li>
<li data-line="124" class="code-line" dir="auto">
<p data-line="124" class="code-line" dir="auto">Select the <strong>Private DNS zone</strong>, called <strong>privatelink.vaultcore.azure.net</strong>.</p>
</li>
<li data-line="126" class="code-line" dir="auto">
<p data-line="126" class="code-line" dir="auto">On your left hand side menu, under <strong>Settings</strong> click on <strong>Virtual network links</strong>.</p>
</li>
<li data-line="128" class="code-line" dir="auto">
<p data-line="128" class="code-line" dir="auto">Validate that there is a link name called <strong>hubnetdnsconfig</strong> and the link status is set to <strong>Completed</strong> and the virtual network is set to <strong>Hub_VNET</strong>, ensure you have a link to both the hub and also the spoke, the link status should be set to <strong>completed</strong>.</p>
</li>
</ol>
<p data-line="130" class="code-line" dir="auto"><img src="https://raw.githubusercontent.com/pelithne/AKS_secure_baseline_the_hard_way_part_two/main/images/keyvaultdnszoneprivatelinks.jpg" alt="Screenshot" data-src="images/keyvaultdnszoneprivatelinks.jpg"></p>
<ol start="8" data-line="132" class="code-line" dir="auto">
<li data-line="132" class="code-line" dir="auto">
<p data-line="132" class="code-line" dir="auto">On the top menu, click on <strong>Home</strong>. Select <strong>Resource Groups</strong> then click on the resource group called <strong>rg-hub</strong>.</p>
</li>
<li data-line="134" class="code-line" dir="auto">
<p data-line="134" class="code-line" dir="auto">Select Jumpbox VM called <strong>Jumpbox-VM</strong>.</p>
</li>
<li data-line="136" class="code-line" dir="auto">
<p data-line="136" class="code-line" dir="auto">In the left-hand side menu, under the <strong>Connect</strong> section, select ‘Bastion’. Enter the <strong>credentials</strong> for the Jumpbox VM and verify that you can log in successfully.</p>
</li>
</ol>
<p data-line="138" class="code-line" dir="auto">In the Jumpbox VM command line type the following command and ensure it returns the <strong>private ip address of the private endpoint</strong>.</p>
<pre><code data-line="140" class="code-line language-bash" dir="auto">dig &lt;KEYVAULT NAME&gt;.vault.azure.net
</code></pre>
<p data-line="143" class="code-line" dir="auto">Example output:</p>
<pre><code data-line="144" class="code-line language-bash" dir="auto">azureuser@Jumpbox-VM:~$ dig alibengtssonkeyvault.vault.azure.net

; &lt;&lt;&gt;&gt; DiG 9.18.12-0ubuntu0.22.04.3-Ubuntu &lt;&lt;&gt;&gt; alibengtssonkeyvault.vault.azure.net
;; global options: +cmd
;; Got answer:
;; -&gt;&gt;HEADER&lt;&lt;- <span class="hljs-string">opcode: QUERY, status: NOERROR, id: 22014
;; flags: qr rd ra; QUERY: 1, ANSWER: 2, AUTHORITY: 0, ADDITIONAL: 1

;; OPT PSEUDOSECTION:
; EDNS: version: 0, flags:; udp: 65494
;; QUESTION SECTION:
;alibengtssonkeyvault.vault.azure.net. IN A

;; ANSWER SECTION:
alibengtssonkeyvault.vault.azure.net. 60 IN CNAME alibengtssonkeyvault.privatelink.vaultcore.azure.net.
alibengtssonkeyvault.privatelink.vaultcore.azure.net. 1800 IN A10.1.2.6

;; Query time: 12 msec
;; SERVER: 127.0.0.53#53(127.0.0.53) (UDP)
;; WHEN: Sun Oct 08 16:41:05 UTC 2023
;; MSG SIZE  rcvd: 138

</span></code></pre>
<p data-line="170" class="code-line" dir="auto">Now, you should have an infrastructure that looks like this:</p>
<p data-line="172" class="code-line" dir="auto"><img src="https://raw.githubusercontent.com/pelithne/AKS_secure_baseline_the_hard_way_part_two/main/images/hubandspokewithpeeringBastionJumpboxFirewallaksvirtualnetlinkandacrandinternalloadbalancerandapplicationgwandkeyvault.jpg" alt="Screenshot" data-src="/images/hubandspokewithpeeringBastionJumpboxFirewallaksvirtualnetlinkandacrandinternalloadbalancerandapplicationgwandkeyvault.jpg"></p>
<h3 data-line="174" class="code-line" dir="auto" id="114-add-a-secret-to-azure-keyvault" tabindex="-1">1.1.4 Add a Secret to Azure KeyVault</h3>
<p data-line="176" class="code-line" dir="auto">We have successfully created an instance of Azure KeyVault with a private endpoint and set up a private DNS zone to resolve the Azure KeyVault instance from the hub and spoke using Virtual Network links. Additionally, we have updated our AKS cluster to support OIDC, enabling workload identity.</p>
<p data-line="178" class="code-line" dir="auto">The next step is to add a secret to Azure KeyVault instance.</p>
<blockquote data-line="180" class="code-line" dir="auto">
<p data-line="180" class="code-line" dir="auto">[!IMPORTANT]
Because the Azure KeyVault is isolated in a VNET, you need to access it from the Jumpbox VM. Please log in to the Jumpbox VM, and set a few environment variables (or load all environment variables you stored in a file):</p>
</blockquote>
<pre><code data-line="183" class="code-line" dir="auto">SPOKE_RG=rg-spoke
LOCATION=eastus
FRONTEND_NAMESPACE="frontend"
BACKEND_NAMESPACE="backend"
SERVICE_ACCOUNT_NAME="workload-identity-sa"
SUBSCRIPTION="$(az account show --query id --output tsv)"
USER_ASSIGNED_IDENTITY_NAME="keyvaultreader"
FEDERATED_IDENTITY_CREDENTIAL_NAME="keyvaultfederated"
KEYVAULT_SECRET_NAME="redissecret"
AKS_CLUSTER_NAME=private-aks
KEYVAULT_NAME=&lt;WRITE YOUR KEYVAULT NAME HERE&gt;
STUDENT_NAME=&lt;WRITE YOUR STUDENT NAME HERE&gt;
ACR_NAME=&lt;NAME OF THE AZURE CONTAINER REGISTRY&gt;

</code></pre>
<p data-line="200" class="code-line" dir="auto">From the <strong>Jumpbox VM</strong> create a secret in the Azure KeyVault. This is the secret that will be used by the frontend application to connect to the (redis) backend.</p>
<pre><code data-line="202" class="code-line language-bash" dir="auto">az keyvault secret <span class="hljs-built_in">set</span> --vault-name <span class="hljs-variable">$KEYVAULT_NAME</span> --name <span class="hljs-variable">$KEYVAULT_SECRET_NAME</span> --value <span class="hljs-string">'redispassword'</span>
</code></pre>
<h3 data-line="206" class="code-line" dir="auto" id="115-add-the-keyvault-url-to-the-environment-variable-keyvault_url" tabindex="-1">1.1.5 Add the KeyVault URL to the Environment Variable <em>KEYVAULT_URL</em></h3>
<pre><code data-line="208" class="code-line language-bash" dir="auto"><span class="hljs-built_in">export</span> KEYVAULT_URL=<span class="hljs-string">"<span class="hljs-subst">$(az keyvault show -g $SPOKE_RG  -n $KEYVAULT_NAME --query properties.vaultUri -o tsv)</span>"</span>
</code></pre>
<h3 data-line="212" class="code-line" dir="auto" id="116-create-a-managed-identity-and-grant-permissions-to-access-the-secret" tabindex="-1">1.1.6 Create a managed identity and grant permissions to access the secret</h3>
<p data-line="214" class="code-line" dir="auto">Create a User Managed Identity. We will give this identity <em>GET access</em> to the keyvault, and later associate it with a Kubernetes service account.</p>
<pre><code data-line="216" class="code-line language-bash" dir="auto">az account <span class="hljs-built_in">set</span> --subscription <span class="hljs-variable">$SUBSCRIPTION</span> 
az identity create --name <span class="hljs-variable">$USER_ASSIGNED_IDENTITY_NAME</span>  --resource-group <span class="hljs-variable">$SPOKE_RG</span>  --location <span class="hljs-variable">$LOCATION</span>  --subscription <span class="hljs-variable">$SUBSCRIPTION</span> 

</code></pre>
<p data-line="222" class="code-line" dir="auto">Set an access policy for the managed identity to access the Key Vault.</p>
<pre><code data-line="224" class="code-line language-bash" dir="auto"><span class="hljs-built_in">export</span> USER_ASSIGNED_CLIENT_ID=<span class="hljs-string">"<span class="hljs-subst">$(az identity show --resource-group $SPOKE_RG  --name $USER_ASSIGNED_IDENTITY_NAME  --query 'clientId' -otsv)</span>"</span>

az keyvault set-policy --name <span class="hljs-variable">$KEYVAULT_NAME</span>  --secret-permissions get --spn <span class="hljs-variable">$USER_ASSIGNED_CLIENT_ID</span> 
</code></pre>
<h3 data-line="231" class="code-line" dir="auto" id="117-connect-to-the-cluster" tabindex="-1">1.1.7 Connect to the Cluster</h3>
<p data-line="233" class="code-line" dir="auto">First, connect to the cluster if not already connected</p>
<pre><code data-line="235" class="code-line language-bash" dir="auto">az aks get-credentials -n <span class="hljs-variable">$AKS_CLUSTER_NAME</span>-<span class="hljs-variable">${STUDENT_NAME}</span>  -g <span class="hljs-variable">$SPOKE_RG</span>
</code></pre>
<h3 data-line="239" class="code-line" dir="auto" id="118-create-service-account" tabindex="-1">1.1.8 Create Service Account</h3>
<p data-line="241" class="code-line" dir="auto">The service account should exist in the frontend namespace, because it's the frontend service that will use that service account to get the credentials to connect to the (redis) backend service.</p>
<blockquote data-line="243" class="code-line" dir="auto">
<p data-line="243" class="code-line" dir="auto">[!Note]
Instead of creating kubenetes manifest files, we will create them on the command line like below. In a real life case, you would create manifest files and store them in a version control system, like git.</p>
</blockquote>
<p data-line="247" class="code-line" dir="auto">First create the frontend namespace</p>
<pre><code data-line="249" class="code-line language-yaml" dir="auto"><span class="hljs-string">cat</span> <span class="hljs-string">&lt;&lt;EOF</span> <span class="hljs-string">|</span> <span class="hljs-string">kubectl</span> <span class="hljs-string">apply</span> <span class="hljs-string">-f</span> <span class="hljs-bullet">-</span>
<span class="hljs-attr">apiVersion:</span> <span class="hljs-string">v1</span>
<span class="hljs-attr">kind:</span> <span class="hljs-string">Namespace</span>
<span class="hljs-attr">metadata:</span>
  <span class="hljs-attr">name:</span> <span class="hljs-string">$FRONTEND_NAMESPACE</span>
  <span class="hljs-attr">labels:</span>
    <span class="hljs-attr">name:</span> <span class="hljs-string">$FRONTEND_NAMESPACE</span>
<span class="hljs-string">EOF</span>
</code></pre>
<p data-line="259" class="code-line" dir="auto">Verify that the namespace called <strong>frontend</strong> has been created.</p>
<pre><code data-line="260" class="code-line language-bash" dir="auto">kubectl get ns
</code></pre>
<p data-line="264" class="code-line" dir="auto">Then create a service account in that namespace. Notice the annotation for <strong>workload identity</strong></p>
<pre><code data-line="265" class="code-line" dir="auto">cat &lt;&lt;EOF | kubectl apply -f -
apiVersion: v1
kind: ServiceAccount
metadata:
  namespace: $FRONTEND_NAMESPACE
  annotations:
    azure.workload.identity/client-id: $USER_ASSIGNED_CLIENT_ID
  name: $SERVICE_ACCOUNT_NAME
EOF
</code></pre>
<h3 data-line="278" class="code-line" dir="auto" id="119-establish-federated-identity-credential" tabindex="-1">1.1.9 Establish Federated Identity Credential</h3>
<p data-line="280" class="code-line" dir="auto">In this step we connect the Kubernetes service account with the user defined managed identity in Azure, using a federated credential.</p>
<pre><code data-line="282" class="code-line language-bash" dir="auto">  az identity federated-credential create --name <span class="hljs-variable">$FEDERATED_IDENTITY_CREDENTIAL_NAME</span> --identity-name <span class="hljs-variable">$USER_ASSIGNED_IDENTITY_NAME</span> --resource-group <span class="hljs-variable">$SPOKE_RG</span> --issuer <span class="hljs-variable">$AKS_OIDC_ISSUER</span> --subject system:serviceaccount:<span class="hljs-variable">$FRONTEND_NAMESPACE</span>:<span class="hljs-variable">$SERVICE_ACCOUNT_NAME</span>
</code></pre>
<h3 data-line="286" class="code-line" dir="auto" id="1110-build-the-application" tabindex="-1">1.1.10 Build the Application</h3>
<p data-line="288" class="code-line" dir="auto">Now its time to build the application. In order to do so, first clone the applications repository:</p>
<pre><code data-line="290" class="code-line language-bash" dir="auto">git <span class="hljs-built_in">clone</span> https://github.com/pelithne/az-vote-with-workload-identity.git
</code></pre>
<p data-line="294" class="code-line" dir="auto">In order to push images, you may have to login to the registry first using your Azure AD identity:</p>
<pre><code data-line="296" class="code-line language-bash" dir="auto">az acr login --name <span class="hljs-variable">$ACR_NAME</span>
</code></pre>
<p data-line="301" class="code-line" dir="auto">Then run the following commands to build, tag and push your container image to the Azure Container Registry</p>
<pre><code data-line="303" class="code-line language-bash" dir="auto"><span class="hljs-built_in">cd</span> az-vote-with-workload-identity
<span class="hljs-built_in">cd</span> azure-vote 
docker build -t azure-vote-front:v1 .
docker tag azure-vote-front:v1 <span class="hljs-variable">$ACR_NAME</span>.azurecr.io/azure-vote-front:v1
docker push <span class="hljs-variable">$ACR_NAME</span>.azurecr.io/azure-vote-front:v1

</code></pre>
<p data-line="311" class="code-line" dir="auto">The string after <code>:</code> is the image tag. This can be used to manage versions of your app, but in this case we will only have one version.</p>
<h3 data-line="314" class="code-line" dir="auto" id="1111-deploy-the-application" tabindex="-1">1.1.11 Deploy the Application</h3>
<p data-line="316" class="code-line" dir="auto">We want to create some separation between the frontend and backend, by deploying them into different namespaces. Later we will add more separation by introducing network policies in the cluster to allow/disallow traffic between specific namespaces.</p>
<p data-line="319" class="code-line" dir="auto">First, create the backend namespace</p>
<blockquote data-line="321" class="code-line" dir="auto">
<p data-line="321" class="code-line" dir="auto">[!Note]
Instead of creating kubernetes manifest, we put them inline for convenience. Feel free to create yaml-manifests instead if you like.</p>
</blockquote>
<pre><code data-line="324" class="code-line language-bash" dir="auto"><span class="hljs-built_in">cat</span> &lt;&lt;<span class="hljs-string">EOF | kubectl apply -f -
apiVersion: v1
kind: Namespace
metadata:
  name: backend
  labels:
    name: backend
EOF</span>
</code></pre>
<p data-line="334" class="code-line" dir="auto">Verify that the namespace called <strong>backend</strong> has been created.</p>
<pre><code data-line="336" class="code-line language-bash" dir="auto">kubectl get ns
</code></pre>
<p data-line="340" class="code-line" dir="auto">Then create the Backend application, which is a Redis store which we will use as a "database". Notice how we inject a password to Redis using an environment variable (not best practice obviously, but for simplicity).</p>
<pre><code data-line="342" class="code-line language-bash" dir="auto"><span class="hljs-built_in">cat</span> &lt;&lt;<span class="hljs-string">EOF | kubectl apply -f -
apiVersion: apps/v1
kind: Deployment
metadata:
  name: azure-vote-back
  namespace: $BACKEND_NAMESPACE
spec:
  replicas: 1
  selector:
    matchLabels:
      app: azure-vote-back
  template:
    metadata:
      labels:
        app: azure-vote-back
    spec:
      nodeSelector:
        "kubernetes.io/os": linux
      containers:
      - name: azure-vote-back
        image: mcr.microsoft.com/oss/bitnami/redis:6.0.8
        ports:
        - containerPort: 6379
          name: redis
        env:
        - name: REDIS_PASSWORD
          value: "redispassword"
---
apiVersion: v1
kind: Service
metadata:
  name: azure-vote-back
  namespace: $BACKEND_NAMESPACE
spec:
  ports:
  - port: 6379
  selector:
    app: azure-vote-back
EOF</span>
</code></pre>
<p data-line="384" class="code-line" dir="auto">Then create the frontend. We already created the frontend namespace in an earlier step, so ju go ahead and create the frontend app in the frontend namespace.</p>
<blockquote data-line="385" class="code-line" dir="auto">
<p data-line="385" class="code-line" dir="auto">[!Note]
A few things worh noting:
<code>azure.workload.identity/use: "true"</code> - This is a label that tells AKS that workload identity should be used
<code>serviceAccountName: $SERVICE_ACCOUNT_NAME</code> - Specifies that this resource is connected to the service account created earlier
<code>image: $ACR_NAME.azurecr.io/azure-vote:v1</code> - The image with the application built in a previous step.
<code>service.beta.kubernetes.io/azure-load-balancer-ipv4: $ILB_EXT_IP</code> - This "hard codes" the IP address of the internal LB to match what was previously configured in App GW as backend.</p>
</blockquote>
<pre><code data-line="393" class="code-line language-bash" dir="auto"><span class="hljs-built_in">cat</span> &lt;&lt;<span class="hljs-string">EOF | kubectl apply -f -
apiVersion: apps/v1
kind: Deployment
metadata:
  name: azure-vote-front
  namespace: $FRONTEND_NAMESPACE
  labels:
    azure.workload.identity/use: "true"
spec:
  replicas: 1
  selector:
    matchLabels:
      app: azure-vote-front
  strategy:
    rollingUpdate:
      maxSurge: 1
      maxUnavailable: 1
  minReadySeconds: 5 
  template:
    metadata:
      labels:
        app: azure-vote-front
        azure.workload.identity/use: "true"
    spec:
      serviceAccountName: $SERVICE_ACCOUNT_NAME
      nodeSelector:
        "kubernetes.io/os": linux
      containers:
      - name: azure-vote-front
        image: $ACR_NAME.azurecr.io/azure-vote-front:v1
        ports:
        - containerPort: 80
        resources:
          requests:
            cpu: 250m
          limits:
            cpu: 500m
        env:
        - name: REDIS
          value: "azure-vote-back.backend"
        - name: KEYVAULT_URL
          value: $KEYVAULT_URL
        - name: SECRET_NAME
          value: $KEYVAULT_SECRET_NAME
---
apiVersion: v1
kind: Service
metadata:
  name: azure-vote-front
  namespace: $FRONTEND_NAMESPACE
  annotations:
    service.beta.kubernetes.io/azure-load-balancer-internal: "true"
    service.beta.kubernetes.io/azure-load-balancer-internal-subnet: "loadbalancer-subnet"
spec:
  type: LoadBalancer
  ports:
  - port: 80
  selector:
    app: azure-vote-front
EOF</span>
</code></pre>
<h3 data-line="456" class="code-line" dir="auto" id="1112-validate-the-application" tabindex="-1">1.1.12 Validate the Application</h3>
<p data-line="458" class="code-line" dir="auto">To test if the application is working, you can navigate to the URL used before to reach the nginx test application. This time the request will be redirected to the Azure Vote frontend instead. If that works, it means that the Azure Vote frontend pod was able to fetch the secret from Azure KeyVault, and use it when connecting to the backend (Redis) service/pod.</p>
<p data-line="460" class="code-line" dir="auto">You can also verify in the application logs that the frontend was able to connect to the backend.</p>
<p data-line="462" class="code-line" dir="auto">To do that, you need to find the name of the pod:</p>
<pre><code data-line="463" class="code-line language-bash" dir="auto">kubectl get pods --namespace frontend
</code></pre>
<p data-line="466" class="code-line" dir="auto">This should give a result timilar to this</p>
<pre><code data-line="467" class="code-line language-bash" dir="auto">NAME                                READY   STATUS    RESTARTS        AGE
azure-vote-front-85d6c66c4d-pgtw9   1/1     Running   29 (7m3s ago)   3h13m
</code></pre>
<p data-line="472" class="code-line" dir="auto">Now you can read the logs of the application by running this command (but with YOUR pod name)</p>
<pre><code data-line="473" class="code-line language-bash" dir="auto">kubectl logs azure-vote-front-85d6c66c4d-pgtw9 --namespace frontend
</code></pre>
<p data-line="477" class="code-line" dir="auto">You should be able to find a line like this:</p>
<pre><code data-line="478" class="code-line language-bash" dir="auto">Connecting to Redis... azure-vote-back.backend
</code></pre>
<p data-line="481" class="code-line" dir="auto">And then a little later:</p>
<pre><code data-line="482" class="code-line language-bash" dir="auto">Connected to Redis!
</code></pre>
<h3 data-line="487" class="code-line" dir="auto" id="1113-workload-network-policy" tabindex="-1">1.1.13 Workload Network Policy</h3>
<p data-line="489" class="code-line" dir="auto">The cluster is deployed with Azure network policies. The Network policies can be used to control traffic between resources in Kubernetes.</p>
<p data-line="491" class="code-line" dir="auto">This first policy will prevent all traffic to the backend namespace.</p>
<pre><code data-line="493" class="code-line language-bash" dir="auto"><span class="hljs-built_in">cat</span> &lt;&lt;<span class="hljs-string">EOF | kubectl apply -f -
apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: deny-ingress-to-backend
  namespace: backend
spec:
  podSelector: {}
  ingress:
  - from:
    - podSelector:
        matchLabels: {}
EOF</span>
</code></pre>
<p data-line="510" class="code-line" dir="auto">Network policies are applied on new TCP connections, and because the frontend application has already created a persistent TCP connection with the backend it might have to be redeployed for the policy to hit. One way to do that is to simply delete the pod and let it recreate itself:</p>
<p data-line="512" class="code-line" dir="auto">First find the pod name</p>
<pre><code data-line="513" class="code-line language-bash" dir="auto">kubectl get pods --namespace frontend
</code></pre>
<p data-line="516" class="code-line" dir="auto">This should give a result timilar to this</p>
<pre><code data-line="517" class="code-line language-bash" dir="auto">NAME                                READY   STATUS    RESTARTS        AGE
azure-vote-front-85d6c66c4d-pgtw9   1/1     Running   29 (7m3s ago)   3h13m
</code></pre>
<p data-line="522" class="code-line" dir="auto">Now delete the pod with the following command (but with YOUR pod name)</p>
<pre><code data-line="524" class="code-line language-bash" dir="auto">kubectl delete pod --namespace frontend azure-vote-front-85d6c66c4d-pgtw9
</code></pre>
<p data-line="528" class="code-line" dir="auto">After the deletion has finished you should be able to se that the "AGE" of the pod has been reset.</p>
<pre><code data-line="529" class="code-line language-bash" dir="auto">kubectl get pods --namespace frontend

NAME                                READY   STATUS    RESTARTS        AGE
azure-vote-front-85d6c66c4d-9wtgd   1/1     Running   0               25s
</code></pre>
<p data-line="536" class="code-line" dir="auto">You should also find that the frontend can no longer communicate with the backend and that when accessing the URL of the app, it will time out.</p>
<p data-line="539" class="code-line" dir="auto">Now apply a new policy that allows traffic into the backend namespace from pods that have the label <code>app: azure-vote-front</code></p>
<pre><code data-line="541" class="code-line language-bash" dir="auto"><span class="hljs-built_in">cat</span> &lt;&lt;<span class="hljs-string">EOF | kubectl apply -f -
apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: allow-from-frontend
  namespace: backend # apply the policy in the backend namespace
spec:
  podSelector:
    matchLabels:
      app: azure-vote-back # select the redis pod
  ingress:
  - from:
    - namespaceSelector:
        matchLabels:
          name: frontend # allow traffic from the frontend namespace
      podSelector:
        matchLabels:
          app: azure-vote-front # allow traffic from the azure-vote-front pod
EOF</span>
</code></pre>
<p data-line="563" class="code-line" dir="auto">Once again you have to recreate the pod, so that it can establish a connection to the backend service. Or you can simply wait for Kubernetes to attemt to recreate the frontend pod.</p>
<p data-line="566" class="code-line" dir="auto">First find the pod name</p>
<pre><code data-line="567" class="code-line language-bash" dir="auto">kubectl get pods --namespace frontend
</code></pre>
<p data-line="571" class="code-line" dir="auto">Then delete the pod (using the name of your pod)</p>
<pre><code data-line="573" class="code-line language-bash" dir="auto">kubectl delete pod --namespace frontend azure-vote-front-85d6c66c4d-pgtw9
</code></pre>
<p data-line="578" class="code-line" dir="auto">This time, communication from azure-vote-front to azure-vote-back is allowed.</p>

        <script>var Be=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var Me=Be((Lt,Ne)=>{var xe="Expected a function",Ae=NaN,Qe="[object Symbol]",Ze=/^\s+|\s+$/g,et=/^[-+]0x[0-9a-f]+$/i,tt=/^0b[01]+$/i,nt=/^0o[0-7]+$/i,rt=parseInt,it=typeof global=="object"&&global&&global.Object===Object&&global,at=typeof self=="object"&&self&&self.Object===Object&&self,ot=it||at||Function("return this")(),st=Object.prototype,lt=st.toString,ct=Math.max,ut=Math.min,ue=function(){return ot.Date.now()};function dt(e,t,n){var r,i,a,s,u,m,d=0,p=!1,b=!1,T=!0;if(typeof e!="function")throw new TypeError(xe);t=Le(t)||0,te(n)&&(p=!!n.leading,b="maxWait"in n,a=b?ct(Le(n.maxWait)||0,t):a,T="trailing"in n?!!n.trailing:T);function E(v){var A=r,_=i;return r=i=void 0,d=v,s=e.apply(_,A),s}function N(v){return d=v,u=setTimeout(L,t),p?E(v):s}function g(v){var A=v-m,_=v-d,h=t-A;return b?ut(h,a-_):h}function S(v){var A=v-m,_=v-d;return m===void 0||A>=t||A<0||b&&_>=a}function L(){var v=ue();if(S(v))return U(v);u=setTimeout(L,g(v))}function U(v){return u=void 0,T&&r?E(v):(r=i=void 0,s)}function R(){u!==void 0&&clearTimeout(u),d=0,r=m=i=u=void 0}function Y(){return u===void 0?s:U(ue())}function I(){var v=ue(),A=S(v);if(r=arguments,i=this,m=v,A){if(u===void 0)return N(m);if(b)return u=setTimeout(L,t),E(m)}return u===void 0&&(u=setTimeout(L,t)),s}return I.cancel=R,I.flush=Y,I}function ft(e,t,n){var r=!0,i=!0;if(typeof e!="function")throw new TypeError(xe);return te(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),dt(e,t,{leading:r,maxWait:t,trailing:i})}function te(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function mt(e){return!!e&&typeof e=="object"}function gt(e){return typeof e=="symbol"||mt(e)&&lt.call(e)==Qe}function Le(e){if(typeof e=="number")return e;if(gt(e))return Ae;if(te(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=te(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(Ze,"");var n=tt.test(e);return n||nt.test(e)?rt(e.slice(2),n?2:8):et.test(e)?Ae:+e}Ne.exports=ft});var pe="code-line",F=class{constructor(t,n,r){this.element=t;this.line=n;this.codeElement=r;this._detailParentElements=Array.from(Re(t,"DETAILS"))}get isVisible(){return!this._detailParentElements.some(t=>!t.open)}},ae=(()=>{let e,t=-1;return n=>{if(!e||n!==t){t=n,e=[new F(document.body,-1)];for(let r of document.getElementsByClassName(pe)){if(!(r instanceof HTMLElement))continue;let i=+r.getAttribute("data-line");isNaN(i)||(r.tagName==="CODE"&&r.parentElement&&r.parentElement.tagName==="PRE"?e.push(new F(r.parentElement,i,r)):r.tagName==="UL"||r.tagName==="OL"||e.push(new F(r,i)))}}return e}})();function oe(e,t){let n=Math.floor(e),r=ae(t),i=r[0]||null;for(let a of r){if(a.line===n)return{previous:a,next:void 0};if(a.line>n)return{previous:i,next:a};i=a}return{previous:i}}function He(e,t){let n=ae(t).filter(m=>m.isVisible),r=e-window.scrollY,i=-1,a=n.length-1;for(;i+1<a;){let m=Math.floor((i+a)/2),d=W(n[m]);d.top+d.height>=r?a=m:i=m}let s=n[a],u=W(s);return a>=1&&u.top>r?{previous:n[i],next:s}:a>1&&a<n.length&&u.top+u.height>r?{previous:s,next:n[a+1]}:{previous:s}}function W({element:e}){let t=e.getBoundingClientRect(),n=e.querySelector(`.${pe}`);if(n){let r=n.getBoundingClientRect(),i=Math.max(1,r.top-t.top);return{top:t.top,height:i}}return t}function K(e,t,n){if(!n.settings?.scrollPreviewWithEditor)return;if(e<=0){window.scroll(window.scrollX,0);return}let{previous:r,next:i}=oe(e,t);if(!r)return;let a=0,s=W(r),u=s.top;if(i&&i.line!==r.line){let m=(e-r.line)/(i.line-r.line),d=u+s.height,p=i.element.getBoundingClientRect().top-d;a=d+m*p}else{let m=e-Math.floor(e);a=u+s.height*m}a=Math.abs(a)<1?Math.sign(a):a,window.scroll(window.scrollX,Math.max(1,window.scrollY+a))}function se(e,t){let{previous:n,next:r}=He(e,t);if(n){if(n.line<0)return 0;let i=W(n),a=e-window.scrollY-i.top;if(r){let s=a/(W(r).top-i.top);return n.line+s*(r.line-n.line)}else{let s=a/i.height;return n.line+s}}return null}function ve(e,t){return ae(t).find(n=>n.element.id===e)}function*Re(e,t){for(let n=e.parentElement;n;n=n.parentElement)n.tagName===t&&(yield n)}var J=class{onDidChangeTextEditorSelection(t,n){let{previous:r}=oe(t,n);this._update(r&&(r.codeElement||r.element))}_update(t){this._unmarkActiveElement(this._current),this._markActiveElement(t),this._current=t}_unmarkActiveElement(t){t&&t.classList.toggle("code-active-line",!1)}_markActiveElement(t){t&&t.classList.toggle("code-active-line",!0)}};function he(e){document.readyState==="loading"||document.readyState==="uninitialized"?document.addEventListener("DOMContentLoaded",e):e()}var be=(e,t)=>({postMessage(n,r){e.postMessage({type:n,source:t.settings.source,...r})}});function le(e){let t=document.getElementById("vscode-markdown-preview-data");if(t){let n=t.getAttribute(e);if(n)return JSON.parse(n)}throw new Error(`Could not load data for ${e}`)}var Q=class{constructor(){this._settings=le("data-settings")}get settings(){return this._settings}updateSettings(t){this._settings=t}};var ye=11;function ke(e,t){var n=t.attributes,r,i,a,s,u;if(!(t.nodeType===ye||e.nodeType===ye)){for(var m=n.length-1;m>=0;m--)r=n[m],i=r.name,a=r.namespaceURI,s=r.value,a?(i=r.localName||i,u=e.getAttributeNS(a,i),u!==s&&(r.prefix==="xmlns"&&(i=r.name),e.setAttributeNS(a,i,s))):(u=e.getAttribute(i),u!==s&&e.setAttribute(i,s));for(var d=e.attributes,p=d.length-1;p>=0;p--)r=d[p],i=r.name,a=r.namespaceURI,a?(i=r.localName||i,t.hasAttributeNS(a,i)||e.removeAttributeNS(a,i)):t.hasAttribute(i)||e.removeAttribute(i)}}var Z,Ue="http://www.w3.org/1999/xhtml",w=typeof document>"u"?void 0:document,Fe=!!w&&"content"in w.createElement("template"),We=!!w&&w.createRange&&"createContextualFragment"in w.createRange();function Ve(e){var t=w.createElement("template");return t.innerHTML=e,t.content.childNodes[0]}function je(e){Z||(Z=w.createRange(),Z.selectNode(w.body));var t=Z.createContextualFragment(e);return t.childNodes[0]}function qe(e){var t=w.createElement("body");return t.innerHTML=e,t.childNodes[0]}function Xe(e){return e=e.trim(),Fe?Ve(e):We?je(e):qe(e)}function ee(e,t){var n=e.nodeName,r=t.nodeName,i,a;return n===r?!0:(i=n.charCodeAt(0),a=r.charCodeAt(0),i<=90&&a>=97?n===r.toUpperCase():a<=90&&i>=97?r===n.toUpperCase():!1)}function Ye(e,t){return!t||t===Ue?w.createElement(e):w.createElementNS(t,e)}function ze(e,t){for(var n=e.firstChild;n;){var r=n.nextSibling;t.appendChild(n),n=r}return t}function ce(e,t,n){e[n]!==t[n]&&(e[n]=t[n],e[n]?e.setAttribute(n,""):e.removeAttribute(n))}var Te={OPTION:function(e,t){var n=e.parentNode;if(n){var r=n.nodeName.toUpperCase();r==="OPTGROUP"&&(n=n.parentNode,r=n&&n.nodeName.toUpperCase()),r==="SELECT"&&!n.hasAttribute("multiple")&&(e.hasAttribute("selected")&&!t.selected&&(e.setAttribute("selected","selected"),e.removeAttribute("selected")),n.selectedIndex=-1)}ce(e,t,"selected")},INPUT:function(e,t){ce(e,t,"checked"),ce(e,t,"disabled"),e.value!==t.value&&(e.value=t.value),t.hasAttribute("value")||e.removeAttribute("value")},TEXTAREA:function(e,t){var n=t.value;e.value!==n&&(e.value=n);var r=e.firstChild;if(r){var i=r.nodeValue;if(i==n||!n&&i==e.placeholder)return;r.nodeValue=n}},SELECT:function(e,t){if(!t.hasAttribute("multiple")){for(var n=-1,r=0,i=e.firstChild,a,s;i;)if(s=i.nodeName&&i.nodeName.toUpperCase(),s==="OPTGROUP")a=i,i=a.firstChild;else{if(s==="OPTION"){if(i.hasAttribute("selected")){n=r;break}r++}i=i.nextSibling,!i&&a&&(i=a.nextSibling,a=null)}e.selectedIndex=n}}},V=1,Ge=11,we=3,Ee=8;function B(){}function $e(e){if(e)return e.getAttribute&&e.getAttribute("id")||e.id}function Ke(e){return function(n,r,i){if(i||(i={}),typeof r=="string")if(n.nodeName==="#document"||n.nodeName==="HTML"||n.nodeName==="BODY"){var a=r;r=w.createElement("html"),r.innerHTML=a}else r=Xe(r);var s=i.getNodeKey||$e,u=i.onBeforeNodeAdded||B,m=i.onNodeAdded||B,d=i.onBeforeElUpdated||B,p=i.onElUpdated||B,b=i.onBeforeNodeDiscarded||B,T=i.onNodeDiscarded||B,E=i.onBeforeElChildrenUpdated||B,N=i.childrenOnly===!0,g=Object.create(null),S=[];function L(c){S.push(c)}function U(c,l){if(c.nodeType===V)for(var o=c.firstChild;o;){var f=void 0;l&&(f=s(o))?L(f):(T(o),o.firstChild&&U(o,l)),o=o.nextSibling}}function R(c,l,o){b(c)!==!1&&(l&&l.removeChild(c),T(c),U(c,o))}function Y(c){if(c.nodeType===V||c.nodeType===Ge)for(var l=c.firstChild;l;){var o=s(l);o&&(g[o]=l),Y(l),l=l.nextSibling}}Y(n);function I(c){m(c);for(var l=c.firstChild;l;){var o=l.nextSibling,f=s(l);if(f){var x=g[f];x&&ee(l,x)?(l.parentNode.replaceChild(x,l),A(x,l)):I(l)}else I(l);l=o}}function v(c,l,o){for(;l;){var f=l.nextSibling;(o=s(l))?L(o):R(l,c,!0),l=f}}function A(c,l,o){var f=s(l);f&&delete g[f],!(!o&&(d(c,l)===!1||(e(c,l),p(c),E(c,l)===!1)))&&(c.nodeName!=="TEXTAREA"?_(c,l):Te.TEXTAREA(c,l))}function _(c,l){var o=l.firstChild,f=c.firstChild,x,P,k,G,O;e:for(;o;){for(G=o.nextSibling,x=s(o);f;){if(k=f.nextSibling,o.isSameNode&&o.isSameNode(f)){o=G,f=k;continue e}P=s(f);var $=f.nodeType,D=void 0;if($===o.nodeType&&($===V?(x?x!==P&&((O=g[x])?k===O?D=!1:(c.insertBefore(O,f),P?L(P):R(f,c,!0),f=O):D=!1):P&&(D=!1),D=D!==!1&&ee(f,o),D&&A(f,o)):($===we||$==Ee)&&(D=!0,f.nodeValue!==o.nodeValue&&(f.nodeValue=o.nodeValue))),D){o=G,f=k;continue e}P?L(P):R(f,c,!0),f=k}if(x&&(O=g[x])&&ee(O,o))c.appendChild(O),A(O,o);else{var ie=u(o);ie!==!1&&(ie&&(o=ie),o.actualize&&(o=o.actualize(c.ownerDocument||w)),c.appendChild(o),I(o))}o=G,f=k}v(c,f,P);var ge=Te[c.nodeName];ge&&ge(c,l)}var h=n,z=h.nodeType,me=r.nodeType;if(!N){if(z===V)me===V?ee(n,r)||(T(n),h=ze(n,Ye(r.nodeName,r.namespaceURI))):h=r;else if(z===we||z===Ee){if(me===z)return h.nodeValue!==r.nodeValue&&(h.nodeValue=r.nodeValue),h;h=r}}if(h===r)T(n);else{if(r.isSameNode&&r.isSameNode(h))return;if(A(h,r,N),S)for(var ne=0,_e=S.length;ne<_e;ne++){var re=g[S[ne]];re&&R(re,re.parentNode,!1)}}return!N&&h!==n&&n.parentNode&&(h.actualize&&(h=h.actualize(n.ownerDocument||w)),n.parentNode.replaceChild(h,n)),h}}var Je=Ke(ke),Se=Je;var Ce=Me(),H=0,Pe=new J,y=new Q,M=0,j=y.settings.source,q=acquireVsCodeApi(),de=q.getState()??{},C={...de,...le("data-state")};typeof de.scrollProgress<"u"&&de?.resource!==C.resource&&(C.scrollProgress=0);q.setState(C);var X=be(q,y);window.cspAlerter.setPoster(X);window.styleLoadingMonitor.setPoster(X);function fe(e){let t=document.getElementsByTagName("img");if(t.length>0){let n=Array.from(t,r=>r.complete?Promise.resolve():new Promise(i=>{r.addEventListener("load",()=>i()),r.addEventListener("error",()=>i())}));Promise.all(n).then(()=>setTimeout(e,0))}else setTimeout(e,0)}he(()=>{let e=C.scrollProgress;if(Oe(),typeof e=="number"&&!y.settings.fragment){fe(()=>{H+=1;let t=Math.max(1,e*document.body.clientHeight);window.scrollTo(0,t)});return}y.settings.scrollPreviewWithEditor&&fe(()=>{if(y.settings.fragment){let t;try{t=encodeURIComponent(y.settings.fragment)}catch{t=y.settings.fragment}C.fragment=void 0,q.setState(C);let n=ve(t,M);n&&(H+=1,K(n.line,M,y))}else isNaN(y.settings.line)||(H+=1,K(y.settings.line,M,y))}),typeof y.settings.selectedLine=="number"&&Pe.onDidChangeTextEditorSelection(y.settings.selectedLine,M)});var pt=(()=>{let e=Ce(t=>{H+=1,fe(()=>K(t,M,y))},50);return t=>{isNaN(t)||(C.line=t,e(t))}})();window.addEventListener("resize",()=>{H+=1,Ie()},!0);function Oe(){let e=document.getElementsByTagName("img"),t=0;for(let n of e)n.id="image-"+t,t+=1,n.setAttribute("data-vscode-context",JSON.stringify({webviewSection:"image",id:n.id,preventDefaultContextMenuItems:!0,resource:j}))}async function De(e,t=5){if(!document.hasFocus()&&t>0){setTimeout(()=>{De(e,t-1)},20);return}try{await navigator.clipboard.write([new ClipboardItem({"image/png":new Promise(n=>{let r=document.createElement("canvas");r!==null&&(r.width=e.naturalWidth,r.height=e.naturalHeight,r.getContext("2d")?.drawImage(e,0,0)),r.toBlob(i=>{i&&n(i),r.remove()},"image/png")})})])}catch(n){console.error(n)}}window.addEventListener("message",async e=>{let t=e.data;switch(t.type){case"copyImage":{let n=document.getElementById(t.id);n instanceof HTMLImageElement&&De(n);return}case"onDidChangeTextEditorSelection":t.source===j&&Pe.onDidChangeTextEditorSelection(t.line,M);return;case"updateView":t.source===j&&pt(t.line);return;case"updateContent":{let n=document.querySelector(".markdown-body"),i=new DOMParser().parseFromString(t.content,"text/html");for(let a of Array.from(i.querySelectorAll("meta")))a.hasAttribute("http-equiv")&&a.remove();if(t.source!==j)n.replaceWith(i.querySelector(".markdown-body")),j=t.source;else{let a=["open"],s=(d,p)=>{if(d.isEqualNode(p))return!0;if(d.tagName!==p.tagName||d.textContent!==p.textContent)return!1;let b=[...d.attributes].filter(g=>!a.includes(g.name)),T=[...p.attributes].filter(g=>!a.includes(g.name));if(b.length!==T.length)return!1;for(let g=0;g<b.length;++g){let S=b[g],L=T[g];if(S.name!==L.name||S.value!==L.value&&S.name!=="data-line")return!1}let E=Array.from(d.children),N=Array.from(p.children);return E.length===N.length&&E.every((g,S)=>s(g,N[S]))},u=i.querySelector(".markdown-body"),m=u.querySelectorAll("link");for(let d of m)d.remove();u.prepend(...m),Se(n,u,{childrenOnly:!0,onBeforeElUpdated:(d,p)=>{if(s(d,p)){let b=d.querySelectorAll("[data-line]"),T=p.querySelectorAll("[data-line]");b.length!==T.length&&console.log("unexpected line number change");for(let E=0;E<b.length;++E){let N=b[E],g=T[E];g&&N.setAttribute("data-line",g.getAttribute("data-line"))}return!1}return d.tagName==="DETAILS"&&p.tagName==="DETAILS"&&d.hasAttribute("open")&&p.setAttribute("open",""),!0}})}++M,window.dispatchEvent(new CustomEvent("vscode.markdown.updateContent")),Oe();break}}},!1);document.addEventListener("dblclick",e=>{if(!y.settings.doubleClickToSwitchToEditor)return;for(let r=e.target;r;r=r.parentNode)if(r.tagName==="A")return;let t=e.pageY,n=se(t,M);typeof n=="number"&&!isNaN(n)&&X.postMessage("didClick",{line:Math.floor(n)})});var vt=["http:","https:","mailto:","vscode:","vscode-insiders:"];document.addEventListener("click",e=>{if(!e)return;let t=e.target;for(;t;){if(t.tagName&&t.tagName==="A"&&t.href){if(t.getAttribute("href").startsWith("#"))return;let n=t.getAttribute("data-href");if(!n){if(vt.some(r=>t.href.startsWith(r)))return;n=t.getAttribute("href")}if(!/^[a-z\-]+:/i.test(n)){X.postMessage("openLink",{href:n}),e.preventDefault(),e.stopPropagation();return}return}t=t.parentNode}},!0);window.addEventListener("scroll",Ce(()=>{if(Ie(),H>0)H-=1;else{let e=se(window.scrollY,M);typeof e=="number"&&!isNaN(e)&&X.postMessage("revealLine",{line:e})}},50));function Ie(){C.scrollProgress=window.scrollY/document.body.clientHeight,q.setState(C)}
</script>

    </body>
</html>
